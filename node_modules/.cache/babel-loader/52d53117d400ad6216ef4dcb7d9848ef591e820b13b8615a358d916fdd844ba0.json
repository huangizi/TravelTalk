{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport { plus, times } from 'number-precision';\nimport { useCallback } from 'react';\nimport { isArray, isNumber, isUndefined, isObject, isEmptyObject } from '../../_util/is';\nimport { getPrecision } from '../utils';\nexport default function useLegalValue(props) {\n  var isRange = props.isRange,\n    min = props.min,\n    max = props.max,\n    onlyMarkValue = props.onlyMarkValue,\n    intervalConfigs = props.intervalConfigs,\n    marks = props.marks;\n  var getPrecisionValue = useCallback(function (val) {\n    var _a = intervalConfigs.find(function (config) {\n        return val >= config.begin && val <= config.end;\n      }),\n      begin = _a.begin,\n      step = _a.step;\n    var offsetVal = val - begin;\n    var stepNum = Math.round(offsetVal / step);\n    var precision = getPrecision(step);\n    var currentIntervalPrecision = parseFloat(times(step, stepNum).toFixed(precision));\n    return plus(begin, currentIntervalPrecision);\n  }, [intervalConfigs]);\n  // 在只允许选择 marks 中的值的时候，找到离value最接近的值\n  var getMarkValue = useCallback(function (val) {\n    if (!isObject(marks) || isEmptyObject(marks)) {\n      console.warn('marks must be an object when onlyMarkValue is true');\n      return min;\n    }\n    if (marks[val]) {\n      return val;\n    }\n    var keys = Object.keys(marks);\n    var diffs = keys.map(function (x) {\n      return Math.abs(val - parseFloat(x));\n    });\n    var minIndex = diffs.indexOf(Math.min.apply(null, diffs));\n    return parseFloat(keys[minIndex]);\n  }, [marks, min]);\n  // 判断值是否在[min, max]区间内，并且满足步长或是标签值\n  var getLegalValue = useCallback(function (val) {\n    if (isUndefined(val)) return min;\n    if (val <= min) return min;\n    if (val >= max) return max;\n    if (onlyMarkValue) return getMarkValue(val);\n    return getPrecisionValue(val);\n  }, [getMarkValue, getPrecisionValue, max, min, onlyMarkValue]);\n  var isLegalValue = useCallback(function (val) {\n    return getLegalValue(val) === val;\n  }, [getLegalValue]);\n  // 获取合法的 range value\n  var getLegalRangeValue = useCallback(function (val) {\n    var _a = __read([min, min], 2),\n      beginVal = _a[0],\n      endVal = _a[1];\n    if (isRange) {\n      if (isArray(val)) {\n        beginVal = getLegalValue(val[0]);\n        endVal = getLegalValue(val[1]);\n      } else {\n        console.error('value must be an array when range is true');\n      }\n    } else if (isNumber(val)) {\n      endVal = getLegalValue(val);\n    } else {\n      console.error('value must be a number when range is false');\n    }\n    return [beginVal, endVal];\n  }, [getLegalValue, isRange, min]);\n  var getNextMarkValue = useCallback(function (value, type) {\n    // arrow Left or arrowRight\n    var multi = type === 'subtraction' ? -1 : 1;\n    var newValue = plus(value, multi * props.step);\n    if (props.onlyMarkValue) {\n      var markKeys = Object.keys(props.marks);\n      var currentIndex = markKeys.findIndex(function (key) {\n        return Number(key) === value;\n      });\n      newValue = markKeys[currentIndex + multi] !== undefined ? Number(markKeys[currentIndex + multi]) : value;\n    }\n    return newValue;\n  }, [props.marks, props.onlyMarkValue, props.step]);\n  return {\n    getLegalRangeValue: getLegalRangeValue,\n    getLegalValue: getLegalValue,\n    isLegalValue: isLegalValue,\n    getNextMarkValue: getNextMarkValue\n  };\n}","map":{"version":3,"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","plus","times","useCallback","isArray","isNumber","isUndefined","isObject","isEmptyObject","getPrecision","useLegalValue","props","isRange","min","max","onlyMarkValue","intervalConfigs","marks","getPrecisionValue","val","_a","find","config","begin","end","step","offsetVal","stepNum","Math","round","precision","currentIntervalPrecision","parseFloat","toFixed","getMarkValue","console","warn","keys","Object","diffs","map","x","abs","minIndex","indexOf","apply","getLegalValue","isLegalValue","getLegalRangeValue","beginVal","endVal","getNextMarkValue","type","multi","newValue","markKeys","currentIndex","findIndex","key","Number","undefined"],"sources":["D:/Code/LegalGPT-frontend/node_modules/@arco-design/web-react/es/Slider/hooks/useLegalValue.js"],"sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { plus, times } from 'number-precision';\nimport { useCallback } from 'react';\nimport { isArray, isNumber, isUndefined, isObject, isEmptyObject } from '../../_util/is';\nimport { getPrecision } from '../utils';\nexport default function useLegalValue(props) {\n    var isRange = props.isRange, min = props.min, max = props.max, onlyMarkValue = props.onlyMarkValue, intervalConfigs = props.intervalConfigs, marks = props.marks;\n    var getPrecisionValue = useCallback(function (val) {\n        var _a = intervalConfigs.find(function (config) {\n            return val >= config.begin && val <= config.end;\n        }), begin = _a.begin, step = _a.step;\n        var offsetVal = val - begin;\n        var stepNum = Math.round(offsetVal / step);\n        var precision = getPrecision(step);\n        var currentIntervalPrecision = parseFloat(times(step, stepNum).toFixed(precision));\n        return plus(begin, currentIntervalPrecision);\n    }, [intervalConfigs]);\n    // 在只允许选择 marks 中的值的时候，找到离value最接近的值\n    var getMarkValue = useCallback(function (val) {\n        if (!isObject(marks) || isEmptyObject(marks)) {\n            console.warn('marks must be an object when onlyMarkValue is true');\n            return min;\n        }\n        if (marks[val]) {\n            return val;\n        }\n        var keys = Object.keys(marks);\n        var diffs = keys.map(function (x) { return Math.abs(val - parseFloat(x)); });\n        var minIndex = diffs.indexOf(Math.min.apply(null, diffs));\n        return parseFloat(keys[minIndex]);\n    }, [marks, min]);\n    // 判断值是否在[min, max]区间内，并且满足步长或是标签值\n    var getLegalValue = useCallback(function (val) {\n        if (isUndefined(val))\n            return min;\n        if (val <= min)\n            return min;\n        if (val >= max)\n            return max;\n        if (onlyMarkValue)\n            return getMarkValue(val);\n        return getPrecisionValue(val);\n    }, [getMarkValue, getPrecisionValue, max, min, onlyMarkValue]);\n    var isLegalValue = useCallback(function (val) {\n        return getLegalValue(val) === val;\n    }, [getLegalValue]);\n    // 获取合法的 range value\n    var getLegalRangeValue = useCallback(function (val) {\n        var _a = __read([min, min], 2), beginVal = _a[0], endVal = _a[1];\n        if (isRange) {\n            if (isArray(val)) {\n                beginVal = getLegalValue(val[0]);\n                endVal = getLegalValue(val[1]);\n            }\n            else {\n                console.error('value must be an array when range is true');\n            }\n        }\n        else if (isNumber(val)) {\n            endVal = getLegalValue(val);\n        }\n        else {\n            console.error('value must be a number when range is false');\n        }\n        return [beginVal, endVal];\n    }, [getLegalValue, isRange, min]);\n    var getNextMarkValue = useCallback(function (value, type) {\n        // arrow Left or arrowRight\n        var multi = type === 'subtraction' ? -1 : 1;\n        var newValue = plus(value, multi * props.step);\n        if (props.onlyMarkValue) {\n            var markKeys = Object.keys(props.marks);\n            var currentIndex = markKeys.findIndex(function (key) { return Number(key) === value; });\n            newValue =\n                markKeys[currentIndex + multi] !== undefined\n                    ? Number(markKeys[currentIndex + multi])\n                    : value;\n        }\n        return newValue;\n    }, [props.marks, props.onlyMarkValue, props.step]);\n    return {\n        getLegalRangeValue: getLegalRangeValue,\n        getLegalValue: getLegalValue,\n        isLegalValue: isLegalValue,\n        getNextMarkValue: getNextMarkValue,\n    };\n}\n"],"mappings":"AAAA,IAAIA,MAAM,GAAI,IAAI,IAAI,IAAI,CAACA,MAAM,IAAK,UAAUC,CAAC,EAAEC,CAAC,EAAE;EAClD,IAAIC,CAAC,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAIH,CAAC,CAACG,MAAM,CAACC,QAAQ,CAAC;EAC1D,IAAI,CAACF,CAAC,EAAE,OAAOF,CAAC;EAChB,IAAIK,CAAC,GAAGH,CAAC,CAACI,IAAI,CAACN,CAAC,CAAC;IAAEO,CAAC;IAAEC,EAAE,GAAG,EAAE;IAAEC,CAAC;EAChC,IAAI;IACA,OAAO,CAACR,CAAC,KAAK,KAAK,CAAC,IAAIA,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAACM,CAAC,GAAGF,CAAC,CAACK,IAAI,EAAE,EAAEC,IAAI,EAAEH,EAAE,CAACI,IAAI,CAACL,CAAC,CAACM,KAAK,CAAC;EAC9E,CAAC,CACD,OAAOC,KAAK,EAAE;IAAEL,CAAC,GAAG;MAAEK,KAAK,EAAEA;IAAM,CAAC;EAAE,CAAC,SAC/B;IACJ,IAAI;MACA,IAAIP,CAAC,IAAI,CAACA,CAAC,CAACI,IAAI,KAAKT,CAAC,GAAGG,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAEH,CAAC,CAACI,IAAI,CAACD,CAAC,CAAC;IACpD,CAAC,SACO;MAAE,IAAII,CAAC,EAAE,MAAMA,CAAC,CAACK,KAAK;IAAE;EACpC;EACA,OAAON,EAAE;AACb,CAAC;AACD,SAASO,IAAI,EAAEC,KAAK,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,OAAO;AACnC,SAASC,OAAO,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,aAAa,QAAQ,gBAAgB;AACxF,SAASC,YAAY,QAAQ,UAAU;AACvC,eAAe,SAASC,aAAaA,CAACC,KAAK,EAAE;EACzC,IAAIC,OAAO,GAAGD,KAAK,CAACC,OAAO;IAAEC,GAAG,GAAGF,KAAK,CAACE,GAAG;IAAEC,GAAG,GAAGH,KAAK,CAACG,GAAG;IAAEC,aAAa,GAAGJ,KAAK,CAACI,aAAa;IAAEC,eAAe,GAAGL,KAAK,CAACK,eAAe;IAAEC,KAAK,GAAGN,KAAK,CAACM,KAAK;EAChK,IAAIC,iBAAiB,GAAGf,WAAW,CAAC,UAAUgB,GAAG,EAAE;IAC/C,IAAIC,EAAE,GAAGJ,eAAe,CAACK,IAAI,CAAC,UAAUC,MAAM,EAAE;QAC5C,OAAOH,GAAG,IAAIG,MAAM,CAACC,KAAK,IAAIJ,GAAG,IAAIG,MAAM,CAACE,GAAG;MACnD,CAAC,CAAC;MAAED,KAAK,GAAGH,EAAE,CAACG,KAAK;MAAEE,IAAI,GAAGL,EAAE,CAACK,IAAI;IACpC,IAAIC,SAAS,GAAGP,GAAG,GAAGI,KAAK;IAC3B,IAAII,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACH,SAAS,GAAGD,IAAI,CAAC;IAC1C,IAAIK,SAAS,GAAGrB,YAAY,CAACgB,IAAI,CAAC;IAClC,IAAIM,wBAAwB,GAAGC,UAAU,CAAC9B,KAAK,CAACuB,IAAI,EAAEE,OAAO,CAAC,CAACM,OAAO,CAACH,SAAS,CAAC,CAAC;IAClF,OAAO7B,IAAI,CAACsB,KAAK,EAAEQ,wBAAwB,CAAC;EAChD,CAAC,EAAE,CAACf,eAAe,CAAC,CAAC;EACrB;EACA,IAAIkB,YAAY,GAAG/B,WAAW,CAAC,UAAUgB,GAAG,EAAE;IAC1C,IAAI,CAACZ,QAAQ,CAACU,KAAK,CAAC,IAAIT,aAAa,CAACS,KAAK,CAAC,EAAE;MAC1CkB,OAAO,CAACC,IAAI,CAAC,oDAAoD,CAAC;MAClE,OAAOvB,GAAG;IACd;IACA,IAAII,KAAK,CAACE,GAAG,CAAC,EAAE;MACZ,OAAOA,GAAG;IACd;IACA,IAAIkB,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACpB,KAAK,CAAC;IAC7B,IAAIsB,KAAK,GAAGF,IAAI,CAACG,GAAG,CAAC,UAAUC,CAAC,EAAE;MAAE,OAAOb,IAAI,CAACc,GAAG,CAACvB,GAAG,GAAGa,UAAU,CAACS,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;IAC5E,IAAIE,QAAQ,GAAGJ,KAAK,CAACK,OAAO,CAAChB,IAAI,CAACf,GAAG,CAACgC,KAAK,CAAC,IAAI,EAAEN,KAAK,CAAC,CAAC;IACzD,OAAOP,UAAU,CAACK,IAAI,CAACM,QAAQ,CAAC,CAAC;EACrC,CAAC,EAAE,CAAC1B,KAAK,EAAEJ,GAAG,CAAC,CAAC;EAChB;EACA,IAAIiC,aAAa,GAAG3C,WAAW,CAAC,UAAUgB,GAAG,EAAE;IAC3C,IAAIb,WAAW,CAACa,GAAG,CAAC,EAChB,OAAON,GAAG;IACd,IAAIM,GAAG,IAAIN,GAAG,EACV,OAAOA,GAAG;IACd,IAAIM,GAAG,IAAIL,GAAG,EACV,OAAOA,GAAG;IACd,IAAIC,aAAa,EACb,OAAOmB,YAAY,CAACf,GAAG,CAAC;IAC5B,OAAOD,iBAAiB,CAACC,GAAG,CAAC;EACjC,CAAC,EAAE,CAACe,YAAY,EAAEhB,iBAAiB,EAAEJ,GAAG,EAAED,GAAG,EAAEE,aAAa,CAAC,CAAC;EAC9D,IAAIgC,YAAY,GAAG5C,WAAW,CAAC,UAAUgB,GAAG,EAAE;IAC1C,OAAO2B,aAAa,CAAC3B,GAAG,CAAC,KAAKA,GAAG;EACrC,CAAC,EAAE,CAAC2B,aAAa,CAAC,CAAC;EACnB;EACA,IAAIE,kBAAkB,GAAG7C,WAAW,CAAC,UAAUgB,GAAG,EAAE;IAChD,IAAIC,EAAE,GAAGnC,MAAM,CAAC,CAAC4B,GAAG,EAAEA,GAAG,CAAC,EAAE,CAAC,CAAC;MAAEoC,QAAQ,GAAG7B,EAAE,CAAC,CAAC,CAAC;MAAE8B,MAAM,GAAG9B,EAAE,CAAC,CAAC,CAAC;IAChE,IAAIR,OAAO,EAAE;MACT,IAAIR,OAAO,CAACe,GAAG,CAAC,EAAE;QACd8B,QAAQ,GAAGH,aAAa,CAAC3B,GAAG,CAAC,CAAC,CAAC,CAAC;QAChC+B,MAAM,GAAGJ,aAAa,CAAC3B,GAAG,CAAC,CAAC,CAAC,CAAC;MAClC,CAAC,MACI;QACDgB,OAAO,CAACnC,KAAK,CAAC,2CAA2C,CAAC;MAC9D;IACJ,CAAC,MACI,IAAIK,QAAQ,CAACc,GAAG,CAAC,EAAE;MACpB+B,MAAM,GAAGJ,aAAa,CAAC3B,GAAG,CAAC;IAC/B,CAAC,MACI;MACDgB,OAAO,CAACnC,KAAK,CAAC,4CAA4C,CAAC;IAC/D;IACA,OAAO,CAACiD,QAAQ,EAAEC,MAAM,CAAC;EAC7B,CAAC,EAAE,CAACJ,aAAa,EAAElC,OAAO,EAAEC,GAAG,CAAC,CAAC;EACjC,IAAIsC,gBAAgB,GAAGhD,WAAW,CAAC,UAAUJ,KAAK,EAAEqD,IAAI,EAAE;IACtD;IACA,IAAIC,KAAK,GAAGD,IAAI,KAAK,aAAa,GAAG,CAAC,CAAC,GAAG,CAAC;IAC3C,IAAIE,QAAQ,GAAGrD,IAAI,CAACF,KAAK,EAAEsD,KAAK,GAAG1C,KAAK,CAACc,IAAI,CAAC;IAC9C,IAAId,KAAK,CAACI,aAAa,EAAE;MACrB,IAAIwC,QAAQ,GAAGjB,MAAM,CAACD,IAAI,CAAC1B,KAAK,CAACM,KAAK,CAAC;MACvC,IAAIuC,YAAY,GAAGD,QAAQ,CAACE,SAAS,CAAC,UAAUC,GAAG,EAAE;QAAE,OAAOC,MAAM,CAACD,GAAG,CAAC,KAAK3D,KAAK;MAAE,CAAC,CAAC;MACvFuD,QAAQ,GACJC,QAAQ,CAACC,YAAY,GAAGH,KAAK,CAAC,KAAKO,SAAS,GACtCD,MAAM,CAACJ,QAAQ,CAACC,YAAY,GAAGH,KAAK,CAAC,CAAC,GACtCtD,KAAK;IACnB;IACA,OAAOuD,QAAQ;EACnB,CAAC,EAAE,CAAC3C,KAAK,CAACM,KAAK,EAAEN,KAAK,CAACI,aAAa,EAAEJ,KAAK,CAACc,IAAI,CAAC,CAAC;EAClD,OAAO;IACHuB,kBAAkB,EAAEA,kBAAkB;IACtCF,aAAa,EAAEA,aAAa;IAC5BC,YAAY,EAAEA,YAAY;IAC1BI,gBAAgB,EAAEA;EACtB,CAAC;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}