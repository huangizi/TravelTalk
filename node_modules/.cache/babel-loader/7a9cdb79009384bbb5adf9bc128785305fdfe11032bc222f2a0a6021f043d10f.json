{"ast":null,"code":"import { useRef, useEffect } from 'react';\nimport { on, off } from '../../_util/dom';\nexport default function useHeaderScroll(props) {\n  var headerWrapperRef = props.headerWrapperRef,\n    headerOffset = props.headerOffset,\n    align = props.align,\n    isScrollable = props.isScrollable,\n    direction = props.direction,\n    onScroll = props.onScroll;\n  function onOffset(offsetX, offsetY) {\n    var offset = 0;\n    if (direction === 'vertical') {\n      offset = headerOffset + offsetY;\n    } else {\n      offset = align === 'left' ? headerOffset + offsetX : headerOffset - offsetX;\n    }\n    onScroll && onScroll(offset);\n  }\n  // wheel\n  var lastWheelDirectionRef = useRef('x');\n  function onWheel(e) {\n    if (!isScrollable) return;\n    e.preventDefault();\n    var deltaX = e.deltaX,\n      deltaY = e.deltaY;\n    var offset = 0;\n    var absX = Math.abs(deltaX);\n    var absY = Math.abs(deltaY);\n    if (absX === absY) {\n      offset = lastWheelDirectionRef.current === 'x' ? deltaX : deltaY;\n    } else if (absX > absY) {\n      offset = deltaX;\n      lastWheelDirectionRef.current = 'x';\n    } else {\n      offset = deltaY;\n      lastWheelDirectionRef.current = 'y';\n    }\n    onOffset(offset, offset);\n  }\n  // touch\n  var positionRef = useRef({\n    clientX: 0,\n    clientY: 0\n  });\n  var getPosition = function (e) {\n    return e && e.touches && e.touches.length && e.touches[0];\n  };\n  var onTouchMove = function (e) {\n    if (e.cancelable) e.preventDefault();\n    var position = getPosition(e);\n    if (!position) return;\n    var _a = positionRef.current,\n      clientX = _a.clientX,\n      clientY = _a.clientY;\n    // 往右移动的距离\n    var offsetX = position.clientX - clientX;\n    // 往下移动的距离\n    var offsetY = position.clientY - clientY;\n    onOffset(-offsetX, -offsetY);\n  };\n  var onTouchMoveEnd = function () {\n    off(document.documentElement, 'touchmove', onTouchMove);\n    off(document.documentElement, 'touchend', onTouchMoveEnd);\n  };\n  var onTouchStart = function (e) {\n    if (!isScrollable) return;\n    var position = getPosition(e);\n    if (!position) return;\n    positionRef.current = {\n      clientX: position.clientX,\n      clientY: position.clientY\n    };\n    on(document.documentElement, 'touchmove', onTouchMove, {\n      passive: false\n    });\n    on(window, 'touchend', onTouchMoveEnd, {\n      passive: false\n    });\n  };\n  var eventProxy = useRef(null);\n  eventProxy.current = {\n    onWheel: onWheel,\n    onTouchStart: onTouchStart\n  };\n  useEffect(function () {\n    on(headerWrapperRef.current, 'wheel', function (e) {\n      eventProxy.current.onWheel(e);\n    }, {\n      passive: false\n    });\n    on(headerWrapperRef.current, 'touchstart', function (e) {\n      eventProxy.current.onTouchStart(e);\n    }, {\n      passive: true\n    });\n  }, [headerWrapperRef.current]);\n}","map":{"version":3,"names":["useRef","useEffect","on","off","useHeaderScroll","props","headerWrapperRef","headerOffset","align","isScrollable","direction","onScroll","onOffset","offsetX","offsetY","offset","lastWheelDirectionRef","onWheel","e","preventDefault","deltaX","deltaY","absX","Math","abs","absY","current","positionRef","clientX","clientY","getPosition","touches","length","onTouchMove","cancelable","position","_a","onTouchMoveEnd","document","documentElement","onTouchStart","passive","window","eventProxy"],"sources":["D:/Code/LegalGPT-frontend/node_modules/@arco-design/web-react/es/Tabs/hook/useHeaderScroll.js"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport { on, off } from '../../_util/dom';\nexport default function useHeaderScroll(props) {\n    var headerWrapperRef = props.headerWrapperRef, headerOffset = props.headerOffset, align = props.align, isScrollable = props.isScrollable, direction = props.direction, onScroll = props.onScroll;\n    function onOffset(offsetX, offsetY) {\n        var offset = 0;\n        if (direction === 'vertical') {\n            offset = headerOffset + offsetY;\n        }\n        else {\n            offset = align === 'left' ? headerOffset + offsetX : headerOffset - offsetX;\n        }\n        onScroll && onScroll(offset);\n    }\n    // wheel\n    var lastWheelDirectionRef = useRef('x');\n    function onWheel(e) {\n        if (!isScrollable)\n            return;\n        e.preventDefault();\n        var deltaX = e.deltaX, deltaY = e.deltaY;\n        var offset = 0;\n        var absX = Math.abs(deltaX);\n        var absY = Math.abs(deltaY);\n        if (absX === absY) {\n            offset = lastWheelDirectionRef.current === 'x' ? deltaX : deltaY;\n        }\n        else if (absX > absY) {\n            offset = deltaX;\n            lastWheelDirectionRef.current = 'x';\n        }\n        else {\n            offset = deltaY;\n            lastWheelDirectionRef.current = 'y';\n        }\n        onOffset(offset, offset);\n    }\n    // touch\n    var positionRef = useRef({\n        clientX: 0,\n        clientY: 0,\n    });\n    var getPosition = function (e) {\n        return e && e.touches && e.touches.length && e.touches[0];\n    };\n    var onTouchMove = function (e) {\n        if (e.cancelable)\n            e.preventDefault();\n        var position = getPosition(e);\n        if (!position)\n            return;\n        var _a = positionRef.current, clientX = _a.clientX, clientY = _a.clientY;\n        // 往右移动的距离\n        var offsetX = position.clientX - clientX;\n        // 往下移动的距离\n        var offsetY = position.clientY - clientY;\n        onOffset(-offsetX, -offsetY);\n    };\n    var onTouchMoveEnd = function () {\n        off(document.documentElement, 'touchmove', onTouchMove);\n        off(document.documentElement, 'touchend', onTouchMoveEnd);\n    };\n    var onTouchStart = function (e) {\n        if (!isScrollable)\n            return;\n        var position = getPosition(e);\n        if (!position)\n            return;\n        positionRef.current = {\n            clientX: position.clientX,\n            clientY: position.clientY,\n        };\n        on(document.documentElement, 'touchmove', onTouchMove, { passive: false });\n        on(window, 'touchend', onTouchMoveEnd, { passive: false });\n    };\n    var eventProxy = useRef(null);\n    eventProxy.current = { onWheel: onWheel, onTouchStart: onTouchStart };\n    useEffect(function () {\n        on(headerWrapperRef.current, 'wheel', function (e) {\n            eventProxy.current.onWheel(e);\n        }, { passive: false });\n        on(headerWrapperRef.current, 'touchstart', function (e) {\n            eventProxy.current.onTouchStart(e);\n        }, { passive: true });\n    }, [headerWrapperRef.current]);\n}\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,SAASC,EAAE,EAAEC,GAAG,QAAQ,iBAAiB;AACzC,eAAe,SAASC,eAAeA,CAACC,KAAK,EAAE;EAC3C,IAAIC,gBAAgB,GAAGD,KAAK,CAACC,gBAAgB;IAAEC,YAAY,GAAGF,KAAK,CAACE,YAAY;IAAEC,KAAK,GAAGH,KAAK,CAACG,KAAK;IAAEC,YAAY,GAAGJ,KAAK,CAACI,YAAY;IAAEC,SAAS,GAAGL,KAAK,CAACK,SAAS;IAAEC,QAAQ,GAAGN,KAAK,CAACM,QAAQ;EAChM,SAASC,QAAQA,CAACC,OAAO,EAAEC,OAAO,EAAE;IAChC,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIL,SAAS,KAAK,UAAU,EAAE;MAC1BK,MAAM,GAAGR,YAAY,GAAGO,OAAO;IACnC,CAAC,MACI;MACDC,MAAM,GAAGP,KAAK,KAAK,MAAM,GAAGD,YAAY,GAAGM,OAAO,GAAGN,YAAY,GAAGM,OAAO;IAC/E;IACAF,QAAQ,IAAIA,QAAQ,CAACI,MAAM,CAAC;EAChC;EACA;EACA,IAAIC,qBAAqB,GAAGhB,MAAM,CAAC,GAAG,CAAC;EACvC,SAASiB,OAAOA,CAACC,CAAC,EAAE;IAChB,IAAI,CAACT,YAAY,EACb;IACJS,CAAC,CAACC,cAAc,EAAE;IAClB,IAAIC,MAAM,GAAGF,CAAC,CAACE,MAAM;MAAEC,MAAM,GAAGH,CAAC,CAACG,MAAM;IACxC,IAAIN,MAAM,GAAG,CAAC;IACd,IAAIO,IAAI,GAAGC,IAAI,CAACC,GAAG,CAACJ,MAAM,CAAC;IAC3B,IAAIK,IAAI,GAAGF,IAAI,CAACC,GAAG,CAACH,MAAM,CAAC;IAC3B,IAAIC,IAAI,KAAKG,IAAI,EAAE;MACfV,MAAM,GAAGC,qBAAqB,CAACU,OAAO,KAAK,GAAG,GAAGN,MAAM,GAAGC,MAAM;IACpE,CAAC,MACI,IAAIC,IAAI,GAAGG,IAAI,EAAE;MAClBV,MAAM,GAAGK,MAAM;MACfJ,qBAAqB,CAACU,OAAO,GAAG,GAAG;IACvC,CAAC,MACI;MACDX,MAAM,GAAGM,MAAM;MACfL,qBAAqB,CAACU,OAAO,GAAG,GAAG;IACvC;IACAd,QAAQ,CAACG,MAAM,EAAEA,MAAM,CAAC;EAC5B;EACA;EACA,IAAIY,WAAW,GAAG3B,MAAM,CAAC;IACrB4B,OAAO,EAAE,CAAC;IACVC,OAAO,EAAE;EACb,CAAC,CAAC;EACF,IAAIC,WAAW,GAAG,SAAAA,CAAUZ,CAAC,EAAE;IAC3B,OAAOA,CAAC,IAAIA,CAAC,CAACa,OAAO,IAAIb,CAAC,CAACa,OAAO,CAACC,MAAM,IAAId,CAAC,CAACa,OAAO,CAAC,CAAC,CAAC;EAC7D,CAAC;EACD,IAAIE,WAAW,GAAG,SAAAA,CAAUf,CAAC,EAAE;IAC3B,IAAIA,CAAC,CAACgB,UAAU,EACZhB,CAAC,CAACC,cAAc,EAAE;IACtB,IAAIgB,QAAQ,GAAGL,WAAW,CAACZ,CAAC,CAAC;IAC7B,IAAI,CAACiB,QAAQ,EACT;IACJ,IAAIC,EAAE,GAAGT,WAAW,CAACD,OAAO;MAAEE,OAAO,GAAGQ,EAAE,CAACR,OAAO;MAAEC,OAAO,GAAGO,EAAE,CAACP,OAAO;IACxE;IACA,IAAIhB,OAAO,GAAGsB,QAAQ,CAACP,OAAO,GAAGA,OAAO;IACxC;IACA,IAAId,OAAO,GAAGqB,QAAQ,CAACN,OAAO,GAAGA,OAAO;IACxCjB,QAAQ,CAAC,CAACC,OAAO,EAAE,CAACC,OAAO,CAAC;EAChC,CAAC;EACD,IAAIuB,cAAc,GAAG,SAAAA,CAAA,EAAY;IAC7BlC,GAAG,CAACmC,QAAQ,CAACC,eAAe,EAAE,WAAW,EAAEN,WAAW,CAAC;IACvD9B,GAAG,CAACmC,QAAQ,CAACC,eAAe,EAAE,UAAU,EAAEF,cAAc,CAAC;EAC7D,CAAC;EACD,IAAIG,YAAY,GAAG,SAAAA,CAAUtB,CAAC,EAAE;IAC5B,IAAI,CAACT,YAAY,EACb;IACJ,IAAI0B,QAAQ,GAAGL,WAAW,CAACZ,CAAC,CAAC;IAC7B,IAAI,CAACiB,QAAQ,EACT;IACJR,WAAW,CAACD,OAAO,GAAG;MAClBE,OAAO,EAAEO,QAAQ,CAACP,OAAO;MACzBC,OAAO,EAAEM,QAAQ,CAACN;IACtB,CAAC;IACD3B,EAAE,CAACoC,QAAQ,CAACC,eAAe,EAAE,WAAW,EAAEN,WAAW,EAAE;MAAEQ,OAAO,EAAE;IAAM,CAAC,CAAC;IAC1EvC,EAAE,CAACwC,MAAM,EAAE,UAAU,EAAEL,cAAc,EAAE;MAAEI,OAAO,EAAE;IAAM,CAAC,CAAC;EAC9D,CAAC;EACD,IAAIE,UAAU,GAAG3C,MAAM,CAAC,IAAI,CAAC;EAC7B2C,UAAU,CAACjB,OAAO,GAAG;IAAET,OAAO,EAAEA,OAAO;IAAEuB,YAAY,EAAEA;EAAa,CAAC;EACrEvC,SAAS,CAAC,YAAY;IAClBC,EAAE,CAACI,gBAAgB,CAACoB,OAAO,EAAE,OAAO,EAAE,UAAUR,CAAC,EAAE;MAC/CyB,UAAU,CAACjB,OAAO,CAACT,OAAO,CAACC,CAAC,CAAC;IACjC,CAAC,EAAE;MAAEuB,OAAO,EAAE;IAAM,CAAC,CAAC;IACtBvC,EAAE,CAACI,gBAAgB,CAACoB,OAAO,EAAE,YAAY,EAAE,UAAUR,CAAC,EAAE;MACpDyB,UAAU,CAACjB,OAAO,CAACc,YAAY,CAACtB,CAAC,CAAC;IACtC,CAAC,EAAE;MAAEuB,OAAO,EAAE;IAAK,CAAC,CAAC;EACzB,CAAC,EAAE,CAACnC,gBAAgB,CAACoB,OAAO,CAAC,CAAC;AAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}