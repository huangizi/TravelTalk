{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport React, { forwardRef, useContext, useRef, useState, useImperativeHandle, useEffect, useCallback, useMemo } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { findDOMNode } from 'react-dom';\nimport useMergeProps from '../_util/hooks/useMergeProps';\nimport useMergeValue from '../_util/hooks/useMergeValue';\nimport cs from '../_util/classNames';\nimport { on, off, isServerRendering } from '../_util/dom';\nimport ResizeObserver from '../_util/resizeObserver';\nimport IconLoading from '../../icon/react-icon/IconLoading';\nimport IconZoomOut from '../../icon/react-icon/IconZoomOut';\nimport IconZoomIn from '../../icon/react-icon/IconZoomIn';\nimport IconFullscreen from '../../icon/react-icon/IconFullscreen';\nimport IconClose from '../../icon/react-icon/IconClose';\nimport IconRotateLeft from '../../icon/react-icon/IconRotateLeft';\nimport IconRotateRight from '../../icon/react-icon/IconRotateRight';\nimport IconOriginalSize from '../../icon/react-icon/IconOriginalSize';\nimport ConfigProvider, { ConfigContext } from '../ConfigProvider';\nimport useImageStatus from './utils/hooks/useImageStatus';\nimport PreviewScales, { defaultScales } from './utils/getScale';\nimport getFixTranslate from './utils/getFixTranslate';\nimport ImagePreviewToolbar from './image-preview-toolbar';\nimport Portal from '../Portal';\nimport { PreviewGroupContext } from './previewGroupContext';\nimport ImagePreviewArrow from './image-preview-arrow';\nimport useOverflowHidden from '../_util/hooks/useOverflowHidden';\nimport { Esc } from '../_util/keycode';\nimport useUpdate from '../_util/hooks/useUpdate';\nimport { isUndefined } from '../_util/is';\nvar ROTATE_STEP = 90;\nvar defaultProps = {\n  maskClosable: true,\n  closable: true,\n  breakPoint: 316,\n  actionsLayout: ['fullScreen', 'rotateRight', 'rotateLeft', 'zoomIn', 'zoomOut', 'originalSize', 'extra'],\n  getPopupContainer: function getPopupContainer() {\n    return document.body;\n  },\n  escToExit: true,\n  scales: defaultScales\n};\nfunction Preview(baseProps, ref) {\n  var _a, _b;\n  var _c = useContext(PreviewGroupContext),\n    previewGroup = _c.previewGroup,\n    previewUrlMap = _c.previewUrlMap,\n    currentIndex = _c.currentIndex,\n    setCurrentIndex = _c.setCurrentIndex,\n    infinite = _c.infinite,\n    previewPropsMap = _c.previewPropsMap;\n  var mergedPreviewProps = previewGroup ? previewPropsMap.get(currentIndex) : {};\n  var mergedProps = useMergeProps(baseProps, defaultProps, mergedPreviewProps);\n  var className = mergedProps.className,\n    style = mergedProps.style,\n    src = mergedProps.src,\n    defaultVisible = mergedProps.defaultVisible,\n    maskClosable = mergedProps.maskClosable,\n    closable = mergedProps.closable,\n    breakPoint = mergedProps.breakPoint,\n    actions = mergedProps.actions,\n    actionsLayout = mergedProps.actionsLayout,\n    getPopupContainer = mergedProps.getPopupContainer,\n    onVisibleChange = mergedProps.onVisibleChange,\n    scales = mergedProps.scales,\n    escToExit = mergedProps.escToExit,\n    _d = mergedProps.imgAttributes,\n    imgAttributes = _d === void 0 ? {} : _d;\n  var mergedSrc = previewGroup ? previewUrlMap.get(currentIndex) : src;\n  var _e = __read(useState(mergedSrc), 2),\n    previewImgSrc = _e[0],\n    setPreviewImgSrc = _e[1];\n  var _f = __read(useMergeValue(false, {\n      defaultValue: defaultVisible,\n      value: mergedProps.visible\n    }), 2),\n    visible = _f[0],\n    setVisible = _f[1];\n  var globalContext = useContext(ConfigContext);\n  var getPrefixCls = globalContext.getPrefixCls,\n    locale = globalContext.locale,\n    rtl = globalContext.rtl;\n  var prefixCls = getPrefixCls('image');\n  var previewPrefixCls = prefixCls + \"-preview\";\n  var classNames = cs(previewPrefixCls, (_a = {}, _a[previewPrefixCls + \"-hide\"] = !visible, _a[previewPrefixCls + \"-rtl\"] = rtl, _a), className);\n  var refImage = useRef();\n  var refImageContainer = useRef();\n  var refWrapper = useRef();\n  var keyboardEventOn = useRef(false);\n  var refMoveData = useRef({\n    pageX: 0,\n    pageY: 0,\n    originX: 0,\n    originY: 0\n  });\n  var _g = useImageStatus('loading'),\n    isLoading = _g.isLoading,\n    isLoaded = _g.isLoaded,\n    setStatus = _g.setStatus;\n  var _h = __read(useState(false), 2),\n    toolbarSimple = _h[0],\n    setToolbarSimple = _h[1];\n  var _j = __read(useState({\n      x: 0,\n      y: 0\n    }), 2),\n    translate = _j[0],\n    setTranslate = _j[1];\n  var _k = __read(useState(1), 2),\n    scale = _k[0],\n    setScale = _k[1];\n  var _l = __read(useState(false), 2),\n    scaleValueVisible = _l[0],\n    setScaleValueVisible = _l[1];\n  var _m = __read(useState(0), 2),\n    rotate = _m[0],\n    setRotate = _m[1];\n  var _o = __read(useState(false), 2),\n    moving = _o[0],\n    setMoving = _o[1];\n  var previewScales = useMemo(function () {\n    return new PreviewScales(scales);\n  }, []);\n  var onLoad = imgAttributes.onLoad,\n    onError = imgAttributes.onError,\n    onMouseDown = imgAttributes.onMouseDown,\n    imgStyle = imgAttributes.style,\n    imgClassName = imgAttributes.className,\n    restImgAttributes = __rest(imgAttributes, [\"onLoad\", \"onError\", \"onMouseDown\", \"style\", \"className\"]);\n  // Reset image params\n  function reset() {\n    setTranslate({\n      x: 0,\n      y: 0\n    });\n    setScale(1);\n    setRotate(0);\n  }\n  useImperativeHandle(ref, function () {\n    return {\n      reset: reset\n    };\n  });\n  var _p = __read(useState(), 2),\n    container = _p[0],\n    setContainer = _p[1];\n  var getContainer = useCallback(function () {\n    return container;\n  }, [container]);\n  useEffect(function () {\n    var container = getPopupContainer && getPopupContainer();\n    var containerDom = findDOMNode(container) || document.body;\n    setContainer(containerDom);\n  }, [getPopupContainer]);\n  useOverflowHidden(getContainer, {\n    hidden: visible\n  });\n  var isFixed = useMemo(function () {\n    return !isServerRendering && container === document.body;\n  }, [container]);\n  // Jump to image at the specified index\n  function jumpTo(index) {\n    var previewListLen = previewUrlMap.size;\n    if (infinite) {\n      index %= previewListLen;\n      if (index < 0) index = previewListLen - Math.abs(index);\n    }\n    if (index !== currentIndex && index >= 0 && index <= previewListLen - 1) {\n      setCurrentIndex(index);\n    }\n  }\n  function onPrev() {\n    jumpTo(currentIndex - 1);\n  }\n  function onNext() {\n    jumpTo(currentIndex + 1);\n  }\n  // Anticlockwise rotation\n  function onRotateLeft() {\n    setRotate(rotate === 0 ? 360 - ROTATE_STEP : rotate - ROTATE_STEP);\n  }\n  // Clockwise rotation\n  function onRotateRight() {\n    setRotate((rotate + ROTATE_STEP) % 360);\n  }\n  // Scale\n  var hideScaleTimer = useRef(null);\n  var showScaleValue = function showScaleValue() {\n    !scaleValueVisible && setScaleValueVisible(true);\n    hideScaleTimer.current && clearTimeout(hideScaleTimer.current);\n    hideScaleTimer.current = setTimeout(function () {\n      setScaleValueVisible(false);\n    }, 1000);\n  };\n  var onScaleChange = function onScaleChange(newScale) {\n    if (scale !== newScale) {\n      setScale(newScale);\n      showScaleValue();\n    }\n  };\n  function onZoomIn() {\n    var newScale = previewScales.getNextScale(scale, 'zoomIn');\n    onScaleChange(newScale);\n  }\n  function onZoomOut() {\n    var newScale = previewScales.getNextScale(scale, 'zoomOut');\n    onScaleChange(newScale);\n  }\n  function onWheelZoom(e) {\n    if (e.deltaY > 0) {\n      // 缩小\n      if (scale >= previewScales.minScale) {\n        // e.preventDefault();\n        onZoomOut();\n      }\n    } else if (scale <= previewScales.maxScale) {\n      // e.preventDefault();\n      onZoomIn();\n    }\n  }\n  function onResetScale() {\n    onScaleChange(1);\n  }\n  function onFullScreen() {\n    var wrapperRect = refWrapper.current.getBoundingClientRect();\n    var imgRect = refImage.current.getBoundingClientRect();\n    var newHeightScale = wrapperRect.height / (imgRect.height / scale);\n    var newWidthScale = wrapperRect.width / (imgRect.width / scale);\n    var newScale = Math.max(newHeightScale, newWidthScale);\n    onScaleChange(newScale);\n  }\n  // Image container is clicked\n  function onOutsideImgClick(e) {\n    if (e.target === e.currentTarget && maskClosable) {\n      close();\n    }\n  }\n  // Close button is clicked.\n  function onCloseClick() {\n    close();\n  }\n  function close() {\n    if (visible) {\n      onVisibleChange && onVisibleChange(false, visible);\n      isUndefined(mergedProps.visible) && setVisible(false);\n    }\n  }\n  function onWrapperResize(entry) {\n    if (entry && entry.length) {\n      var wrapperRect = entry[0].contentRect;\n      var nextSimple = wrapperRect.width < breakPoint;\n      setToolbarSimple(nextSimple);\n    }\n  }\n  // Check the translate and correct it if needed\n  var checkAndFixTranslate = function checkAndFixTranslate() {\n    if (!refWrapper.current || !refImage.current) return;\n    var wrapperRect = refWrapper.current.getBoundingClientRect();\n    var imgRect = refImage.current.getBoundingClientRect();\n    var _a = __read(getFixTranslate(wrapperRect, imgRect, translate.x, translate.y, scale), 2),\n      x = _a[0],\n      y = _a[1];\n    if (x !== translate.x || y !== translate.y) {\n      setTranslate({\n        x: x,\n        y: y\n      });\n    }\n  };\n  // Update position on moving if needed\n  var onMoving = function onMoving(e) {\n    if (visible && moving) {\n      e.preventDefault && e.preventDefault();\n      var _a = refMoveData.current,\n        originX = _a.originX,\n        originY = _a.originY,\n        pageX = _a.pageX,\n        pageY = _a.pageY;\n      var nextX = originX + (e.pageX - pageX) / scale;\n      var nextY = originY + (e.pageY - pageY) / scale;\n      setTranslate({\n        x: nextX,\n        y: nextY\n      });\n    }\n  };\n  var onMoveEnd = function onMoveEnd(e) {\n    e.preventDefault && e.preventDefault();\n    setMoving(false);\n  };\n  function onImgLoaded(e) {\n    setStatus('loaded');\n    onLoad && onLoad(e);\n  }\n  function onImgLoadError(e) {\n    setStatus('error');\n    onError && onError(e);\n  }\n  // Record position data on move start\n  var onMoveStart = function onMoveStart(e) {\n    e.preventDefault && e.preventDefault();\n    setMoving(true);\n    var ev = e.type === 'touchstart' ? e.touches[0] : e;\n    refMoveData.current.pageX = ev.pageX;\n    refMoveData.current.pageY = ev.pageY;\n    refMoveData.current.originX = translate.x;\n    refMoveData.current.originY = translate.y;\n    onMouseDown && onMouseDown(e);\n  };\n  useEffect(function () {\n    if (visible && moving) {\n      on(document, 'mousemove', onMoving, false);\n      on(document, 'mouseup', onMoveEnd, false);\n    }\n    return function () {\n      off(document, 'mousemove', onMoving, false);\n      off(document, 'mouseup', onMoveEnd, false);\n    };\n  }, [visible, moving]);\n  // Correct translate after moved\n  useEffect(function () {\n    if (!moving) {\n      checkAndFixTranslate();\n    }\n  }, [moving, translate]);\n  // Correct translate when scale changes\n  useEffect(function () {\n    checkAndFixTranslate();\n  }, [scale]);\n  // Reset when preview is opened\n  useEffect(function () {\n    if (visible) {\n      reset();\n    }\n  }, [visible]);\n  // Reset on first mount or image switches\n  useEffect(function () {\n    setPreviewImgSrc(mergedSrc);\n    setStatus(mergedSrc ? 'loading' : 'loaded');\n    reset();\n  }, [mergedSrc]);\n  useUpdate(function () {\n    previewScales.updateScale(scales);\n    setScale(1);\n  }, [scales]);\n  // Close when pressing esc\n  useEffect(function () {\n    var onKeyDown = function onKeyDown(e) {\n      if (escToExit && e && e.key === Esc.key) {\n        close();\n      }\n    };\n    if (visible && !moving && !keyboardEventOn.current) {\n      keyboardEventOn.current = true;\n      on(document, 'keydown', onKeyDown);\n    }\n    return function () {\n      keyboardEventOn.current = false;\n      off(document, 'keydown', onKeyDown);\n    };\n  }, [visible, escToExit, moving]);\n  var defaultActions = [{\n    key: 'fullScreen',\n    name: locale.ImagePreview.fullScreen,\n    content: React.createElement(IconFullscreen, null),\n    onClick: onFullScreen\n  }, {\n    key: 'rotateRight',\n    name: locale.ImagePreview.rotateRight,\n    content: React.createElement(IconRotateRight, null),\n    onClick: onRotateRight\n  }, {\n    key: 'rotateLeft',\n    name: locale.ImagePreview.rotateLeft,\n    content: React.createElement(IconRotateLeft, null),\n    onClick: onRotateLeft\n  }, {\n    key: 'zoomIn',\n    name: locale.ImagePreview.zoomIn,\n    content: React.createElement(IconZoomIn, null),\n    onClick: onZoomIn,\n    disabled: scale === previewScales.maxScale\n  }, {\n    key: 'zoomOut',\n    name: locale.ImagePreview.zoomOut,\n    content: React.createElement(IconZoomOut, null),\n    onClick: onZoomOut,\n    disabled: scale === previewScales.minScale\n  }, {\n    key: 'originalSize',\n    name: locale.ImagePreview.originalSize,\n    content: React.createElement(IconOriginalSize, null),\n    onClick: onResetScale\n  }];\n  return React.createElement(Portal, {\n    visible: visible,\n    forceRender: false,\n    getContainer: getContainer\n  }, React.createElement(ConfigProvider, __assign({}, globalContext, {\n    getPopupContainer: function getPopupContainer() {\n      return refWrapper.current;\n    }\n  }), React.createElement(\"div\", {\n    className: classNames,\n    style: __assign(__assign({}, style || {}), isFixed ? {} : {\n      zIndex: 'inherit',\n      position: 'absolute'\n    })\n  }, React.createElement(CSSTransition, {\n    in: visible,\n    timeout: 400,\n    appear: true,\n    classNames: \"fadeImage\",\n    mountOnEnter: true,\n    unmountOnExit: false,\n    onEnter: function onEnter(e) {\n      e.parentNode.style.display = 'block';\n      e.style.display = 'block';\n    },\n    onExited: function onExited(e) {\n      e.parentNode.style.display = '';\n      e.style.display = 'none';\n    }\n  }, React.createElement(\"div\", {\n    className: previewPrefixCls + \"-mask\"\n  })), visible && React.createElement(ResizeObserver, {\n    onResize: onWrapperResize\n  }, React.createElement(\"div\", {\n    ref: refWrapper,\n    className: previewPrefixCls + \"-wrapper\",\n    onClick: onOutsideImgClick\n  }, React.createElement(\"div\", {\n    ref: refImageContainer,\n    className: previewPrefixCls + \"-img-container\",\n    style: {\n      transform: \"scale(\" + scale + \", \" + scale + \")\"\n    },\n    onClick: onOutsideImgClick\n  }, React.createElement(\"img\", __assign({\n    onWheel: onWheelZoom,\n    ref: refImage,\n    className: cs(imgClassName, previewPrefixCls + \"-img\", (_b = {}, _b[previewPrefixCls + \"-img-moving\"] = moving, _b)),\n    style: __assign(__assign({}, imgStyle), {\n      transform: \"translate(\" + translate.x + \"px, \" + translate.y + \"px) rotate(\" + rotate + \"deg)\"\n    })\n  }, restImgAttributes, {\n    onLoad: onImgLoaded,\n    onError: onImgLoadError,\n    onMouseDown: onMoveStart,\n    key: previewImgSrc,\n    src: previewImgSrc\n  })), isLoading && React.createElement(\"div\", {\n    className: previewPrefixCls + \"-loading\"\n  }, React.createElement(IconLoading, null))), React.createElement(CSSTransition, {\n    in: scaleValueVisible,\n    timeout: 400,\n    appear: true,\n    classNames: \"fadeImage\",\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: previewPrefixCls + \"-scale-value\"\n  }, (scale * 100).toFixed(0), \"%\")), isLoaded && React.createElement(ImagePreviewToolbar, {\n    prefixCls: prefixCls,\n    previewPrefixCls: previewPrefixCls,\n    actions: actions,\n    actionsLayout: actionsLayout,\n    defaultActions: defaultActions,\n    simple: toolbarSimple\n  }), closable && React.createElement(\"div\", {\n    className: previewPrefixCls + \"-close-btn\",\n    onClick: onCloseClick\n  }, React.createElement(IconClose, null)), previewGroup && React.createElement(ImagePreviewArrow, {\n    previewCount: previewUrlMap.size,\n    current: currentIndex,\n    infinite: infinite,\n    onPrev: onPrev,\n    onNext: onNext\n  }))))));\n}\nvar PreviewComponent = forwardRef(Preview);\nPreviewComponent.displayName = 'ImagePreview';\nexport default PreviewComponent;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__read","o","m","Symbol","iterator","r","ar","next","done","push","value","error","React","forwardRef","useContext","useRef","useState","useImperativeHandle","useEffect","useCallback","useMemo","CSSTransition","findDOMNode","useMergeProps","useMergeValue","cs","on","off","isServerRendering","ResizeObserver","IconLoading","IconZoomOut","IconZoomIn","IconFullscreen","IconClose","IconRotateLeft","IconRotateRight","IconOriginalSize","ConfigProvider","ConfigContext","useImageStatus","PreviewScales","defaultScales","getFixTranslate","ImagePreviewToolbar","Portal","PreviewGroupContext","ImagePreviewArrow","useOverflowHidden","Esc","useUpdate","isUndefined","ROTATE_STEP","defaultProps","maskClosable","closable","breakPoint","actionsLayout","getPopupContainer","document","body","escToExit","scales","Preview","baseProps","ref","_a","_b","_c","previewGroup","previewUrlMap","currentIndex","setCurrentIndex","infinite","previewPropsMap","mergedPreviewProps","get","mergedProps","className","style","src","defaultVisible","actions","onVisibleChange","_d","imgAttributes","mergedSrc","_e","previewImgSrc","setPreviewImgSrc","_f","defaultValue","visible","setVisible","globalContext","getPrefixCls","locale","rtl","prefixCls","previewPrefixCls","classNames","refImage","refImageContainer","refWrapper","keyboardEventOn","refMoveData","pageX","pageY","originX","originY","_g","isLoading","isLoaded","setStatus","_h","toolbarSimple","setToolbarSimple","_j","x","y","translate","setTranslate","_k","scale","setScale","_l","scaleValueVisible","setScaleValueVisible","_m","rotate","setRotate","_o","moving","setMoving","previewScales","onLoad","onError","onMouseDown","imgStyle","imgClassName","restImgAttributes","reset","_p","container","setContainer","getContainer","containerDom","hidden","isFixed","jumpTo","index","previewListLen","size","Math","abs","onPrev","onNext","onRotateLeft","onRotateRight","hideScaleTimer","showScaleValue","current","clearTimeout","setTimeout","onScaleChange","newScale","onZoomIn","getNextScale","onZoomOut","onWheelZoom","deltaY","minScale","maxScale","onResetScale","onFullScreen","wrapperRect","getBoundingClientRect","imgRect","newHeightScale","height","newWidthScale","width","max","onOutsideImgClick","target","currentTarget","close","onCloseClick","onWrapperResize","entry","contentRect","nextSimple","checkAndFixTranslate","onMoving","preventDefault","nextX","nextY","onMoveEnd","onImgLoaded","onImgLoadError","onMoveStart","ev","type","touches","updateScale","onKeyDown","key","defaultActions","name","ImagePreview","fullScreen","content","createElement","onClick","rotateRight","rotateLeft","zoomIn","disabled","zoomOut","originalSize","forceRender","zIndex","position","in","timeout","appear","mountOnEnter","unmountOnExit","onEnter","parentNode","display","onExited","onResize","transform","onWheel","toFixed","simple","previewCount","PreviewComponent","displayName"],"sources":["D:/Code/EchoGPT-frontend/node_modules/@arco-design/web-react/es/Image/image-preview.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { forwardRef, useContext, useRef, useState, useImperativeHandle, useEffect, useCallback, useMemo, } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { findDOMNode } from 'react-dom';\nimport useMergeProps from '../_util/hooks/useMergeProps';\nimport useMergeValue from '../_util/hooks/useMergeValue';\nimport cs from '../_util/classNames';\nimport { on, off, isServerRendering } from '../_util/dom';\nimport ResizeObserver from '../_util/resizeObserver';\nimport IconLoading from '../../icon/react-icon/IconLoading';\nimport IconZoomOut from '../../icon/react-icon/IconZoomOut';\nimport IconZoomIn from '../../icon/react-icon/IconZoomIn';\nimport IconFullscreen from '../../icon/react-icon/IconFullscreen';\nimport IconClose from '../../icon/react-icon/IconClose';\nimport IconRotateLeft from '../../icon/react-icon/IconRotateLeft';\nimport IconRotateRight from '../../icon/react-icon/IconRotateRight';\nimport IconOriginalSize from '../../icon/react-icon/IconOriginalSize';\nimport ConfigProvider, { ConfigContext } from '../ConfigProvider';\nimport useImageStatus from './utils/hooks/useImageStatus';\nimport PreviewScales, { defaultScales } from './utils/getScale';\nimport getFixTranslate from './utils/getFixTranslate';\nimport ImagePreviewToolbar from './image-preview-toolbar';\nimport Portal from '../Portal';\nimport { PreviewGroupContext } from './previewGroupContext';\nimport ImagePreviewArrow from './image-preview-arrow';\nimport useOverflowHidden from '../_util/hooks/useOverflowHidden';\nimport { Esc } from '../_util/keycode';\nimport useUpdate from '../_util/hooks/useUpdate';\nimport { isUndefined } from '../_util/is';\nvar ROTATE_STEP = 90;\nvar defaultProps = {\n    maskClosable: true,\n    closable: true,\n    breakPoint: 316,\n    actionsLayout: [\n        'fullScreen',\n        'rotateRight',\n        'rotateLeft',\n        'zoomIn',\n        'zoomOut',\n        'originalSize',\n        'extra',\n    ],\n    getPopupContainer: function () { return document.body; },\n    escToExit: true,\n    scales: defaultScales,\n};\nfunction Preview(baseProps, ref) {\n    var _a, _b;\n    var _c = useContext(PreviewGroupContext), previewGroup = _c.previewGroup, previewUrlMap = _c.previewUrlMap, currentIndex = _c.currentIndex, setCurrentIndex = _c.setCurrentIndex, infinite = _c.infinite, previewPropsMap = _c.previewPropsMap;\n    var mergedPreviewProps = previewGroup ? previewPropsMap.get(currentIndex) : {};\n    var mergedProps = useMergeProps(baseProps, defaultProps, mergedPreviewProps);\n    var className = mergedProps.className, style = mergedProps.style, src = mergedProps.src, defaultVisible = mergedProps.defaultVisible, maskClosable = mergedProps.maskClosable, closable = mergedProps.closable, breakPoint = mergedProps.breakPoint, actions = mergedProps.actions, actionsLayout = mergedProps.actionsLayout, getPopupContainer = mergedProps.getPopupContainer, onVisibleChange = mergedProps.onVisibleChange, scales = mergedProps.scales, escToExit = mergedProps.escToExit, _d = mergedProps.imgAttributes, imgAttributes = _d === void 0 ? {} : _d;\n    var mergedSrc = previewGroup ? previewUrlMap.get(currentIndex) : src;\n    var _e = __read(useState(mergedSrc), 2), previewImgSrc = _e[0], setPreviewImgSrc = _e[1];\n    var _f = __read(useMergeValue(false, {\n        defaultValue: defaultVisible,\n        value: mergedProps.visible,\n    }), 2), visible = _f[0], setVisible = _f[1];\n    var globalContext = useContext(ConfigContext);\n    var getPrefixCls = globalContext.getPrefixCls, locale = globalContext.locale, rtl = globalContext.rtl;\n    var prefixCls = getPrefixCls('image');\n    var previewPrefixCls = prefixCls + \"-preview\";\n    var classNames = cs(previewPrefixCls, (_a = {},\n        _a[previewPrefixCls + \"-hide\"] = !visible,\n        _a[previewPrefixCls + \"-rtl\"] = rtl,\n        _a), className);\n    var refImage = useRef();\n    var refImageContainer = useRef();\n    var refWrapper = useRef();\n    var keyboardEventOn = useRef(false);\n    var refMoveData = useRef({\n        pageX: 0,\n        pageY: 0,\n        originX: 0,\n        originY: 0,\n    });\n    var _g = useImageStatus('loading'), isLoading = _g.isLoading, isLoaded = _g.isLoaded, setStatus = _g.setStatus;\n    var _h = __read(useState(false), 2), toolbarSimple = _h[0], setToolbarSimple = _h[1];\n    var _j = __read(useState({ x: 0, y: 0 }), 2), translate = _j[0], setTranslate = _j[1];\n    var _k = __read(useState(1), 2), scale = _k[0], setScale = _k[1];\n    var _l = __read(useState(false), 2), scaleValueVisible = _l[0], setScaleValueVisible = _l[1];\n    var _m = __read(useState(0), 2), rotate = _m[0], setRotate = _m[1];\n    var _o = __read(useState(false), 2), moving = _o[0], setMoving = _o[1];\n    var previewScales = useMemo(function () {\n        return new PreviewScales(scales);\n    }, []);\n    var onLoad = imgAttributes.onLoad, onError = imgAttributes.onError, onMouseDown = imgAttributes.onMouseDown, imgStyle = imgAttributes.style, imgClassName = imgAttributes.className, restImgAttributes = __rest(imgAttributes, [\"onLoad\", \"onError\", \"onMouseDown\", \"style\", \"className\"]);\n    // Reset image params\n    function reset() {\n        setTranslate({ x: 0, y: 0 });\n        setScale(1);\n        setRotate(0);\n    }\n    useImperativeHandle(ref, function () { return ({\n        reset: reset,\n    }); });\n    var _p = __read(useState(), 2), container = _p[0], setContainer = _p[1];\n    var getContainer = useCallback(function () { return container; }, [container]);\n    useEffect(function () {\n        var container = getPopupContainer && getPopupContainer();\n        var containerDom = (findDOMNode(container) || document.body);\n        setContainer(containerDom);\n    }, [getPopupContainer]);\n    useOverflowHidden(getContainer, { hidden: visible });\n    var isFixed = useMemo(function () { return !isServerRendering && container === document.body; }, [container]);\n    // Jump to image at the specified index\n    function jumpTo(index) {\n        var previewListLen = previewUrlMap.size;\n        if (infinite) {\n            index %= previewListLen;\n            if (index < 0)\n                index = previewListLen - Math.abs(index);\n        }\n        if (index !== currentIndex && index >= 0 && index <= previewListLen - 1) {\n            setCurrentIndex(index);\n        }\n    }\n    function onPrev() {\n        jumpTo(currentIndex - 1);\n    }\n    function onNext() {\n        jumpTo(currentIndex + 1);\n    }\n    // Anticlockwise rotation\n    function onRotateLeft() {\n        setRotate(rotate === 0 ? 360 - ROTATE_STEP : rotate - ROTATE_STEP);\n    }\n    // Clockwise rotation\n    function onRotateRight() {\n        setRotate((rotate + ROTATE_STEP) % 360);\n    }\n    // Scale\n    var hideScaleTimer = useRef(null);\n    var showScaleValue = function () {\n        !scaleValueVisible && setScaleValueVisible(true);\n        hideScaleTimer.current && clearTimeout(hideScaleTimer.current);\n        hideScaleTimer.current = setTimeout(function () {\n            setScaleValueVisible(false);\n        }, 1000);\n    };\n    var onScaleChange = function (newScale) {\n        if (scale !== newScale) {\n            setScale(newScale);\n            showScaleValue();\n        }\n    };\n    function onZoomIn() {\n        var newScale = previewScales.getNextScale(scale, 'zoomIn');\n        onScaleChange(newScale);\n    }\n    function onZoomOut() {\n        var newScale = previewScales.getNextScale(scale, 'zoomOut');\n        onScaleChange(newScale);\n    }\n    function onWheelZoom(e) {\n        if (e.deltaY > 0) {\n            // 缩小\n            if (scale >= previewScales.minScale) {\n                // e.preventDefault();\n                onZoomOut();\n            }\n        }\n        else if (scale <= previewScales.maxScale) {\n            // e.preventDefault();\n            onZoomIn();\n        }\n    }\n    function onResetScale() {\n        onScaleChange(1);\n    }\n    function onFullScreen() {\n        var wrapperRect = refWrapper.current.getBoundingClientRect();\n        var imgRect = refImage.current.getBoundingClientRect();\n        var newHeightScale = wrapperRect.height / (imgRect.height / scale);\n        var newWidthScale = wrapperRect.width / (imgRect.width / scale);\n        var newScale = Math.max(newHeightScale, newWidthScale);\n        onScaleChange(newScale);\n    }\n    // Image container is clicked\n    function onOutsideImgClick(e) {\n        if (e.target === e.currentTarget && maskClosable) {\n            close();\n        }\n    }\n    // Close button is clicked.\n    function onCloseClick() {\n        close();\n    }\n    function close() {\n        if (visible) {\n            onVisibleChange && onVisibleChange(false, visible);\n            isUndefined(mergedProps.visible) && setVisible(false);\n        }\n    }\n    function onWrapperResize(entry) {\n        if (entry && entry.length) {\n            var wrapperRect = entry[0].contentRect;\n            var nextSimple = wrapperRect.width < breakPoint;\n            setToolbarSimple(nextSimple);\n        }\n    }\n    // Check the translate and correct it if needed\n    var checkAndFixTranslate = function () {\n        if (!refWrapper.current || !refImage.current)\n            return;\n        var wrapperRect = refWrapper.current.getBoundingClientRect();\n        var imgRect = refImage.current.getBoundingClientRect();\n        var _a = __read(getFixTranslate(wrapperRect, imgRect, translate.x, translate.y, scale), 2), x = _a[0], y = _a[1];\n        if (x !== translate.x || y !== translate.y) {\n            setTranslate({\n                x: x,\n                y: y,\n            });\n        }\n    };\n    // Update position on moving if needed\n    var onMoving = function (e) {\n        if (visible && moving) {\n            e.preventDefault && e.preventDefault();\n            var _a = refMoveData.current, originX = _a.originX, originY = _a.originY, pageX = _a.pageX, pageY = _a.pageY;\n            var nextX = originX + (e.pageX - pageX) / scale;\n            var nextY = originY + (e.pageY - pageY) / scale;\n            setTranslate({\n                x: nextX,\n                y: nextY,\n            });\n        }\n    };\n    var onMoveEnd = function (e) {\n        e.preventDefault && e.preventDefault();\n        setMoving(false);\n    };\n    function onImgLoaded(e) {\n        setStatus('loaded');\n        onLoad && onLoad(e);\n    }\n    function onImgLoadError(e) {\n        setStatus('error');\n        onError && onError(e);\n    }\n    // Record position data on move start\n    var onMoveStart = function (e) {\n        e.preventDefault && e.preventDefault();\n        setMoving(true);\n        var ev = e.type === 'touchstart' ? e.touches[0] : e;\n        refMoveData.current.pageX = ev.pageX;\n        refMoveData.current.pageY = ev.pageY;\n        refMoveData.current.originX = translate.x;\n        refMoveData.current.originY = translate.y;\n        onMouseDown && onMouseDown(e);\n    };\n    useEffect(function () {\n        if (visible && moving) {\n            on(document, 'mousemove', onMoving, false);\n            on(document, 'mouseup', onMoveEnd, false);\n        }\n        return function () {\n            off(document, 'mousemove', onMoving, false);\n            off(document, 'mouseup', onMoveEnd, false);\n        };\n    }, [visible, moving]);\n    // Correct translate after moved\n    useEffect(function () {\n        if (!moving) {\n            checkAndFixTranslate();\n        }\n    }, [moving, translate]);\n    // Correct translate when scale changes\n    useEffect(function () {\n        checkAndFixTranslate();\n    }, [scale]);\n    // Reset when preview is opened\n    useEffect(function () {\n        if (visible) {\n            reset();\n        }\n    }, [visible]);\n    // Reset on first mount or image switches\n    useEffect(function () {\n        setPreviewImgSrc(mergedSrc);\n        setStatus(mergedSrc ? 'loading' : 'loaded');\n        reset();\n    }, [mergedSrc]);\n    useUpdate(function () {\n        previewScales.updateScale(scales);\n        setScale(1);\n    }, [scales]);\n    // Close when pressing esc\n    useEffect(function () {\n        var onKeyDown = function (e) {\n            if (escToExit && e && e.key === Esc.key) {\n                close();\n            }\n        };\n        if (visible && !moving && !keyboardEventOn.current) {\n            keyboardEventOn.current = true;\n            on(document, 'keydown', onKeyDown);\n        }\n        return function () {\n            keyboardEventOn.current = false;\n            off(document, 'keydown', onKeyDown);\n        };\n    }, [visible, escToExit, moving]);\n    var defaultActions = [\n        {\n            key: 'fullScreen',\n            name: locale.ImagePreview.fullScreen,\n            content: React.createElement(IconFullscreen, null),\n            onClick: onFullScreen,\n        },\n        {\n            key: 'rotateRight',\n            name: locale.ImagePreview.rotateRight,\n            content: React.createElement(IconRotateRight, null),\n            onClick: onRotateRight,\n        },\n        {\n            key: 'rotateLeft',\n            name: locale.ImagePreview.rotateLeft,\n            content: React.createElement(IconRotateLeft, null),\n            onClick: onRotateLeft,\n        },\n        {\n            key: 'zoomIn',\n            name: locale.ImagePreview.zoomIn,\n            content: React.createElement(IconZoomIn, null),\n            onClick: onZoomIn,\n            disabled: scale === previewScales.maxScale,\n        },\n        {\n            key: 'zoomOut',\n            name: locale.ImagePreview.zoomOut,\n            content: React.createElement(IconZoomOut, null),\n            onClick: onZoomOut,\n            disabled: scale === previewScales.minScale,\n        },\n        {\n            key: 'originalSize',\n            name: locale.ImagePreview.originalSize,\n            content: React.createElement(IconOriginalSize, null),\n            onClick: onResetScale,\n        },\n    ];\n    return (React.createElement(Portal, { visible: visible, forceRender: false, getContainer: getContainer },\n        React.createElement(ConfigProvider, __assign({}, globalContext, { getPopupContainer: function () { return refWrapper.current; } }),\n            React.createElement(\"div\", { className: classNames, style: __assign(__assign({}, (style || {})), (isFixed ? {} : { zIndex: 'inherit', position: 'absolute' })) },\n                React.createElement(CSSTransition, { in: visible, timeout: 400, appear: true, classNames: \"fadeImage\", mountOnEnter: true, unmountOnExit: false, onEnter: function (e) {\n                        e.parentNode.style.display = 'block';\n                        e.style.display = 'block';\n                    }, onExited: function (e) {\n                        e.parentNode.style.display = '';\n                        e.style.display = 'none';\n                    } },\n                    React.createElement(\"div\", { className: previewPrefixCls + \"-mask\" })),\n                visible && (React.createElement(ResizeObserver, { onResize: onWrapperResize },\n                    React.createElement(\"div\", { ref: refWrapper, className: previewPrefixCls + \"-wrapper\", onClick: onOutsideImgClick },\n                        React.createElement(\"div\", { ref: refImageContainer, className: previewPrefixCls + \"-img-container\", style: { transform: \"scale(\" + scale + \", \" + scale + \")\" }, onClick: onOutsideImgClick },\n                            React.createElement(\"img\", __assign({ onWheel: onWheelZoom, ref: refImage, className: cs(imgClassName, previewPrefixCls + \"-img\", (_b = {},\n                                    _b[previewPrefixCls + \"-img-moving\"] = moving,\n                                    _b)), style: __assign(__assign({}, imgStyle), { transform: \"translate(\" + translate.x + \"px, \" + translate.y + \"px) rotate(\" + rotate + \"deg)\" }) }, restImgAttributes, { onLoad: onImgLoaded, onError: onImgLoadError, onMouseDown: onMoveStart, key: previewImgSrc, src: previewImgSrc })),\n                            isLoading && (React.createElement(\"div\", { className: previewPrefixCls + \"-loading\" },\n                                React.createElement(IconLoading, null)))),\n                        React.createElement(CSSTransition, { in: scaleValueVisible, timeout: 400, appear: true, classNames: \"fadeImage\", unmountOnExit: true },\n                            React.createElement(\"div\", { className: previewPrefixCls + \"-scale-value\" },\n                                (scale * 100).toFixed(0),\n                                \"%\")),\n                        isLoaded && (React.createElement(ImagePreviewToolbar, { prefixCls: prefixCls, previewPrefixCls: previewPrefixCls, actions: actions, actionsLayout: actionsLayout, defaultActions: defaultActions, simple: toolbarSimple })),\n                        closable && (React.createElement(\"div\", { className: previewPrefixCls + \"-close-btn\", onClick: onCloseClick },\n                            React.createElement(IconClose, null))),\n                        previewGroup && (React.createElement(ImagePreviewArrow, { previewCount: previewUrlMap.size, current: currentIndex, infinite: infinite, onPrev: onPrev, onNext: onNext })))))))));\n}\nvar PreviewComponent = forwardRef(Preview);\nPreviewComponent.displayName = 'ImagePreview';\nexport default PreviewComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}