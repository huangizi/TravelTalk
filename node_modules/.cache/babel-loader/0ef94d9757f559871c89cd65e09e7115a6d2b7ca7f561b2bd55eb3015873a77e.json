{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport isEqualWith from 'lodash/isEqualWith';\nimport { useState, useContext, useEffect, useRef, useCallback } from 'react';\nimport { FormContext } from '../context';\nimport warn from '../../_util/warning';\nvar useFormState = function useFormState(field, form) {\n  var formCtx = useContext(FormContext);\n  var formInstance = form || formCtx.store;\n  //  if field change, get the real value from fieldRef.current\n  var fieldRef = useRef(field);\n  fieldRef.current = field;\n  var getFieldStateFromStore = useCallback(function () {\n    var field = fieldRef.current;\n    var formState = formInstance.getFieldsState([field]);\n    return formState === null || formState === void 0 ? void 0 : formState[field];\n  }, []);\n  var _a = __read(useState(getFieldStateFromStore), 2),\n    formState = _a[0],\n    setFormState = _a[1];\n  var formStateRef = useRef(formState);\n  useEffect(function () {\n    if (!formInstance) {\n      warn(true, 'formInstance is not available');\n      return;\n    }\n    var registerStateWatcher = (formInstance === null || formInstance === void 0 ? void 0 : formInstance.getInnerMethods(true)).registerStateWatcher;\n    var updateState = function updateState() {\n      var newValue = getFieldStateFromStore();\n      if (!isEqualWith(formStateRef.current, newValue)) {\n        setFormState(newValue);\n        formStateRef.current = newValue;\n      }\n    };\n    updateState();\n    var cancelWatch = registerStateWatcher && registerStateWatcher(updateState);\n    return function () {\n      cancelWatch && cancelWatch();\n    };\n  }, []);\n  return formState;\n};\nexport default useFormState;","map":{"version":3,"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","isEqualWith","useState","useContext","useEffect","useRef","useCallback","FormContext","warn","useFormState","field","form","formCtx","formInstance","store","fieldRef","current","getFieldStateFromStore","formState","getFieldsState","_a","setFormState","formStateRef","registerStateWatcher","getInnerMethods","updateState","newValue","cancelWatch"],"sources":["D:/Code/EchoGPT-frontend/node_modules/@arco-design/web-react/es/Form/hooks/useState.js"],"sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport isEqualWith from 'lodash/isEqualWith';\nimport { useState, useContext, useEffect, useRef, useCallback } from 'react';\nimport { FormContext } from '../context';\nimport warn from '../../_util/warning';\nvar useFormState = function (field, form) {\n    var formCtx = useContext(FormContext);\n    var formInstance = form || formCtx.store;\n    //  if field change, get the real value from fieldRef.current\n    var fieldRef = useRef(field);\n    fieldRef.current = field;\n    var getFieldStateFromStore = useCallback(function () {\n        var field = fieldRef.current;\n        var formState = formInstance.getFieldsState([field]);\n        return formState === null || formState === void 0 ? void 0 : formState[field];\n    }, []);\n    var _a = __read(useState(getFieldStateFromStore), 2), formState = _a[0], setFormState = _a[1];\n    var formStateRef = useRef(formState);\n    useEffect(function () {\n        if (!formInstance) {\n            warn(true, 'formInstance is not available');\n            return;\n        }\n        var registerStateWatcher = (formInstance === null || formInstance === void 0 ? void 0 : formInstance.getInnerMethods(true)).registerStateWatcher;\n        var updateState = function () {\n            var newValue = getFieldStateFromStore();\n            if (!isEqualWith(formStateRef.current, newValue)) {\n                setFormState(newValue);\n                formStateRef.current = newValue;\n            }\n        };\n        updateState();\n        var cancelWatch = registerStateWatcher && registerStateWatcher(updateState);\n        return function () {\n            cancelWatch && cancelWatch();\n        };\n    }, []);\n    return formState;\n};\nexport default useFormState;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}