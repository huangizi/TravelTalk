{"ast":null,"code":"import { isArray } from '../_util/is';\nimport Store from './base/store';\nexport var ValueSeparator = '__arco_cascader__';\nexport var SHOW_PARENT = 'parent';\nexport var SHOW_CHILD = 'child';\nexport var PANEL_MODE = {\n  cascader: 'cascader',\n  select: 'select'\n};\nexport function isEmptyValue(value) {\n  return !value || isArray(value) && value.length === 0;\n}\nexport function getConfig(props) {\n  return {\n    showEmptyChildren: props.showEmptyChildren,\n    changeOnSelect: props.changeOnSelect,\n    lazyload: !!props.loadMore,\n    fieldNames: props.fieldNames,\n    filterOption: props.filterOption,\n    showParent: props.mode === 'multiple' && !props.changeOnSelect && props.checkedStrategy === SHOW_PARENT\n  };\n}\nexport function getStore(props, value) {\n  var tmp = value ? Array.isArray(value[0]) ? value : [value] : [];\n  return new Store(props.options || [], tmp, getConfig(props));\n}\nexport var transformValuesToSet = function (values) {\n  var _values = values || [];\n  var valuesSet = _values.reduce(function (set, next) {\n    // 'next' could be a string.\n    set.add([].concat(next).join(ValueSeparator));\n    return set;\n  }, new Set());\n  return valuesSet;\n};\nexport var valueInSet = function (set, value) {\n  var _value = value || [];\n  return set.has(_value.join(ValueSeparator));\n};\nexport var removeValueFromSet = function (set, value) {\n  var _value = value || [];\n  return set.delete(_value.join(ValueSeparator));\n};\nexport var formatValue = function (value, isMultiple, store) {\n  var _value = [];\n  if (value === undefined) {\n    _value = [];\n  } else if (isMultiple) {\n    _value = value;\n  } else {\n    _value = [value];\n  }\n  if (store && store.config.showParent) {\n    var checkedNodes = store.getCheckedNodes();\n    var valuesSet_1 = transformValuesToSet(checkedNodes.map(function (node) {\n      return node.pathValue;\n    }));\n    var result_1 = [];\n    var temp_1 = {};\n    _value.map(function (v) {\n      v.some(function (_, index, arr) {\n        var curVal = arr.slice(0, index + 1);\n        var pass = valueInSet(valuesSet_1, curVal);\n        if (pass && !temp_1[curVal.join(ValueSeparator)]) {\n          result_1.push(curVal);\n          temp_1[curVal.join(ValueSeparator)] = 1;\n        }\n        return pass;\n      });\n    });\n    return result_1;\n  }\n  return _value;\n};\n// change check status to false\nvar deny2Checked = function (option) {\n  var deny = function (options) {\n    return !Array.isArray(options) ? false : options.every(function (item) {\n      if (item._checked || item.disabled) {\n        return true;\n      }\n      return deny(item.children);\n    });\n  };\n  return option._halfChecked && deny(option === null || option === void 0 ? void 0 : option.children);\n};\nexport var getMultipleCheckValue = function (propsValue, store, option, _checked) {\n  var checked = _checked && deny2Checked(option) ? false : _checked;\n  var beforeValueSet = store.getCheckedNodes().reduce(function (set, node) {\n    set.add(node.pathValue.join(ValueSeparator));\n    return set;\n  }, new Set());\n  option.setCheckedState(checked);\n  var checkedNodes = store.getCheckedNodes();\n  var currentValue = checkedNodes.map(function (node) {\n    return node.pathValue;\n  });\n  var currentValueSet = transformValuesToSet(currentValue);\n  var newValueSet = new Set();\n  return propsValue.filter(function (v) {\n    // v 不在 beforeValueSet 中，说明 v 不包含对应的option。直接返回true，不应该清除掉。\n    if (!valueInSet(beforeValueSet, v) || valueInSet(currentValueSet, v)) {\n      newValueSet.add(v.join(ValueSeparator));\n      return true;\n    }\n  }).concat(currentValue.filter(function (v) {\n    return !valueInSet(newValueSet, v);\n  }));\n};","map":{"version":3,"names":["isArray","Store","ValueSeparator","SHOW_PARENT","SHOW_CHILD","PANEL_MODE","cascader","select","isEmptyValue","value","length","getConfig","props","showEmptyChildren","changeOnSelect","lazyload","loadMore","fieldNames","filterOption","showParent","mode","checkedStrategy","getStore","tmp","Array","options","transformValuesToSet","values","_values","valuesSet","reduce","set","next","add","concat","join","Set","valueInSet","_value","has","removeValueFromSet","delete","formatValue","isMultiple","store","undefined","config","checkedNodes","getCheckedNodes","valuesSet_1","map","node","pathValue","result_1","temp_1","v","some","_","index","arr","curVal","slice","pass","push","deny2Checked","option","deny","every","item","_checked","disabled","children","_halfChecked","getMultipleCheckValue","propsValue","checked","beforeValueSet","setCheckedState","currentValue","currentValueSet","newValueSet","filter"],"sources":["D:/Code/ceo-copilot-frontend/node_modules/@arco-design/web-react/es/Cascader/util.js"],"sourcesContent":["import { isArray } from '../_util/is';\nimport Store from './base/store';\nexport var ValueSeparator = '__arco_cascader__';\nexport var SHOW_PARENT = 'parent';\nexport var SHOW_CHILD = 'child';\nexport var PANEL_MODE = {\n    cascader: 'cascader',\n    select: 'select',\n};\nexport function isEmptyValue(value) {\n    return !value || (isArray(value) && value.length === 0);\n}\nexport function getConfig(props) {\n    return {\n        showEmptyChildren: props.showEmptyChildren,\n        changeOnSelect: props.changeOnSelect,\n        lazyload: !!props.loadMore,\n        fieldNames: props.fieldNames,\n        filterOption: props.filterOption,\n        showParent: props.mode === 'multiple' && !props.changeOnSelect && props.checkedStrategy === SHOW_PARENT,\n    };\n}\nexport function getStore(props, value) {\n    var tmp = value ? (Array.isArray(value[0]) ? value : [value]) : [];\n    return new Store(props.options || [], tmp, getConfig(props));\n}\nexport var transformValuesToSet = function (values) {\n    var _values = values || [];\n    var valuesSet = _values.reduce(function (set, next) {\n        // 'next' could be a string.\n        set.add([].concat(next).join(ValueSeparator));\n        return set;\n    }, new Set());\n    return valuesSet;\n};\nexport var valueInSet = function (set, value) {\n    var _value = value || [];\n    return set.has(_value.join(ValueSeparator));\n};\nexport var removeValueFromSet = function (set, value) {\n    var _value = value || [];\n    return set.delete(_value.join(ValueSeparator));\n};\nexport var formatValue = function (value, isMultiple, store) {\n    var _value = [];\n    if (value === undefined) {\n        _value = [];\n    }\n    else if (isMultiple) {\n        _value = value;\n    }\n    else {\n        _value = [value];\n    }\n    if (store && store.config.showParent) {\n        var checkedNodes = store.getCheckedNodes();\n        var valuesSet_1 = transformValuesToSet(checkedNodes.map(function (node) { return node.pathValue; }));\n        var result_1 = [];\n        var temp_1 = {};\n        _value.map(function (v) {\n            v.some(function (_, index, arr) {\n                var curVal = arr.slice(0, index + 1);\n                var pass = valueInSet(valuesSet_1, curVal);\n                if (pass && !temp_1[curVal.join(ValueSeparator)]) {\n                    result_1.push(curVal);\n                    temp_1[curVal.join(ValueSeparator)] = 1;\n                }\n                return pass;\n            });\n        });\n        return result_1;\n    }\n    return _value;\n};\n// change check status to false\nvar deny2Checked = function (option) {\n    var deny = function (options) {\n        return !Array.isArray(options)\n            ? false\n            : options.every(function (item) {\n                if (item._checked || item.disabled) {\n                    return true;\n                }\n                return deny(item.children);\n            });\n    };\n    return option._halfChecked && deny(option === null || option === void 0 ? void 0 : option.children);\n};\nexport var getMultipleCheckValue = function (propsValue, store, option, _checked) {\n    var checked = _checked && deny2Checked(option) ? false : _checked;\n    var beforeValueSet = store.getCheckedNodes().reduce(function (set, node) {\n        set.add(node.pathValue.join(ValueSeparator));\n        return set;\n    }, new Set());\n    option.setCheckedState(checked);\n    var checkedNodes = store.getCheckedNodes();\n    var currentValue = checkedNodes.map(function (node) { return node.pathValue; });\n    var currentValueSet = transformValuesToSet(currentValue);\n    var newValueSet = new Set();\n    return propsValue\n        .filter(function (v) {\n        // v 不在 beforeValueSet 中，说明 v 不包含对应的option。直接返回true，不应该清除掉。\n        if (!valueInSet(beforeValueSet, v) || valueInSet(currentValueSet, v)) {\n            newValueSet.add(v.join(ValueSeparator));\n            return true;\n        }\n    })\n        .concat(currentValue.filter(function (v) {\n        return !valueInSet(newValueSet, v);\n    }));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}