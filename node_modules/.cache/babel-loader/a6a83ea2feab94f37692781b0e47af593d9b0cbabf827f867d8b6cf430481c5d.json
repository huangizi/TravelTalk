{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport React, { useState, useRef, useContext, useImperativeHandle, forwardRef, useMemo, useCallback } from 'react';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport BTween from 'b-tween';\nimport { isObject, isArray } from '../_util/is';\nimport cs from '../_util/classNames';\nimport Spin from '../Spin';\nimport Thead from './thead/index';\nimport Tbody from './tbody/index';\nimport Tfoot from './tfoot/index';\nimport Pagination from '../Pagination';\nimport { on, off } from '../_util/dom';\nimport { ConfigContext } from '../ConfigProvider';\nimport { getScrollBarHeight, getScrollBarWidth, deepCloneData, getOriginData } from './utils';\nimport ColGroup from './colgroup';\nimport useExpand from './hooks/useExpand';\nimport useRowSelection from './hooks/useRowSelection';\nimport useComponent from './hooks/useComponent';\nimport useStickyOffsets from './hooks/useStickyOffsets';\nimport useStickyClassNames from './hooks/useStickyClassNames';\nimport useColumns from './hooks/useColumns';\nimport useUpdate from '../_util/hooks/useUpdate';\nimport ResizeObserver from '../_util/resizeObserver';\nimport useMergeProps from '../_util/hooks/useMergeProps';\nimport useIsomorphicLayoutEffect from '../_util/hooks/useIsomorphicLayoutEffect';\nimport { pickDataAttributes } from '../_util/pick';\nvar defaultProps = {\n  showHeader: true,\n  border: true,\n  hover: true,\n  rowKey: 'key',\n  pagePosition: 'br',\n  childrenColumnName: 'children',\n  indentSize: 15,\n  showSorterTooltip: true\n};\nfunction Table(baseProps, ref) {\n  var _a, _b;\n  var _c, _d;\n  var _e = useContext(ConfigContext),\n    getPrefixCls = _e.getPrefixCls,\n    loadingElement = _e.loadingElement,\n    ctxSize = _e.size,\n    tablePagination = _e.tablePagination,\n    renderEmpty = _e.renderEmpty,\n    componentConfig = _e.componentConfig,\n    rtl = _e.rtl;\n  var props = useMergeProps(baseProps, defaultProps, componentConfig === null || componentConfig === void 0 ? void 0 : componentConfig.Table);\n  // priority: props.pagination > ConfigProvider.tablePagination > ConfigProvider.Table.pagination\n  var mergePagination = useMergeProps(isObject(baseProps === null || baseProps === void 0 ? void 0 : baseProps.pagination) ? baseProps === null || baseProps === void 0 ? void 0 : baseProps.pagination : {}, isObject((_c = componentConfig === null || componentConfig === void 0 ? void 0 : componentConfig.Table) === null || _c === void 0 ? void 0 : _c.pagination) ? (_d = componentConfig === null || componentConfig === void 0 ? void 0 : componentConfig.Table) === null || _d === void 0 ? void 0 : _d.pagination : {}, tablePagination || {});\n  var style = props.style,\n    className = props.className,\n    components = props.components,\n    border = props.border,\n    borderCell = props.borderCell,\n    _f = props.columns,\n    columns = _f === void 0 ? [] : _f,\n    _g = props.data,\n    data = _g === void 0 ? [] : _g,\n    scroll = props.scroll,\n    noDataElement = props.noDataElement,\n    showHeader = props.showHeader,\n    stripe = props.stripe,\n    hover = props.hover,\n    pagination = props.pagination,\n    onChange = props.onChange,\n    pagePosition = props.pagePosition,\n    childrenColumnName = props.childrenColumnName,\n    indentSize = props.indentSize,\n    rowSelection = props.rowSelection,\n    tableLayoutFixed = props.tableLayoutFixed,\n    footer = props.footer,\n    virtualized = props.virtualized,\n    renderPagination = props.renderPagination,\n    summary = props.summary,\n    rowKey = props.rowKey;\n  var clonedData = useMemo(function () {\n    return deepCloneData(data, childrenColumnName);\n  }, [data, childrenColumnName]);\n  var prefixCls = getPrefixCls('table');\n  // configProvider 提供的size可能和table size 不匹配，此时默认 'default'\n  var size = props.size || (['default', 'middle', 'small'].indexOf(ctxSize) > -1 ? ctxSize : 'default');\n  var refTableHead = useRef(null);\n  var refTableBody = useRef(null);\n  var refTableFoot = useRef(null);\n  var refTable = useRef(null);\n  // Not fixed header\n  var refTableNF = useRef(null);\n  var lastScrollLeft = useRef(0);\n  var scrollbarChanged = useRef(false);\n  var _h = getDefaultFiltersAndSorter(columns),\n    currentFilters = _h.currentFilters,\n    currentSorter = _h.currentSorter;\n  var _j = __read(useState(1), 2),\n    currentPage = _j[0],\n    setCurrentPage = _j[1];\n  var _k = __read(useState(mergePagination.pageSize || mergePagination.defaultPageSize || 10), 2),\n    innerPageSize = _k[0],\n    setInnerPageSize = _k[1];\n  var _l = __read(useState(currentFilters), 2),\n    filters = _l[0],\n    setFilters = _l[1];\n  var _m = __read(useState(currentSorter), 2),\n    sorter = _m[0],\n    setSorter = _m[1];\n  var _o = __read(useState(0), 2),\n    tableViewWidth = _o[0],\n    setTableViewWidth = _o[1];\n  var _p = __read(useColumns(props), 2),\n    groupColumns = _p[0],\n    flattenColumns = _p[1];\n  var stickyOffsets = useStickyOffsets(flattenColumns);\n  var _q = __read(useStickyClassNames(groupColumns, flattenColumns, prefixCls), 2),\n    groupStickyClassNames = _q[0],\n    stickyClassNames = _q[1];\n  var _r = useComponent(components),\n    ComponentTable = _r.ComponentTable,\n    ComponentBodyWrapper = _r.ComponentBodyWrapper,\n    ComponentHeaderWrapper = _r.ComponentHeaderWrapper;\n  var getRowKey = useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return function (record) {\n        return rowKey(getOriginData(record));\n      };\n    }\n    return function (record) {\n      return record[rowKey];\n    };\n  }, [rowKey]);\n  function getDefaultFiltersAndSorter(columns) {\n    var currentFilters = {};\n    var currentSorter = {};\n    function travel(columns) {\n      if (columns && columns.length > 0) {\n        columns.forEach(function (column, index) {\n          var innerDataIndex = column.dataIndex === undefined ? index : column.dataIndex;\n          if (!column[childrenColumnName]) {\n            if (column.defaultFilters) {\n              currentFilters[innerDataIndex] = column.defaultFilters;\n            }\n            if (column.filteredValue) {\n              currentFilters[innerDataIndex] = column.filteredValue;\n            }\n            if (column.defaultSortOrder) {\n              currentSorter.field = innerDataIndex;\n              currentSorter.direction = column.defaultSortOrder;\n            }\n            if (column.sortOrder) {\n              currentSorter.field = innerDataIndex;\n              currentSorter.direction = column.sortOrder;\n            }\n          } else {\n            travel(column[childrenColumnName]);\n          }\n        });\n      }\n    }\n    travel(columns);\n    return {\n      currentFilters: currentFilters,\n      currentSorter: currentSorter\n    };\n  }\n  var controlledFilter = useMemo(function () {\n    // 允许 filteredValue 设置为 undefined 表示不筛选\n    var flattenFilteredValueColumns = flattenColumns.filter(function (column) {\n      return 'filteredValue' in column;\n    });\n    var newFilters = {};\n    // 受控的筛选，当columns中的筛选发生改变时，更新state\n    if (flattenFilteredValueColumns.length) {\n      flattenFilteredValueColumns.forEach(function (column, index) {\n        var innerDataIndex = column.dataIndex === undefined ? index : column.dataIndex;\n        if (innerDataIndex !== undefined) {\n          newFilters[innerDataIndex] = column.filteredValue;\n        }\n      });\n    }\n    return newFilters;\n  }, [flattenColumns]);\n  var controlledSorter = useMemo(function () {\n    // 允许 sorter 设置为 null，表示不排序\n    var flattenSortOrderColumns = flattenColumns.filter(function (column) {\n      return 'sortOrder' in column;\n    });\n    var length = flattenSortOrderColumns.length;\n    while (length--) {\n      var column = flattenSortOrderColumns[length];\n      if (column.sortOrder || length === 0) {\n        return {\n          field: column.dataIndex,\n          direction: column.sortOrder\n        };\n      }\n    }\n    return null;\n  }, [flattenColumns]);\n  var innerSorter = controlledSorter || sorter || {};\n  var innerFilters = useMemo(function () {\n    return Object.keys(controlledFilter).length ? controlledFilter : filters;\n  }, [filters, controlledFilter]);\n  /** ----------- Sorter ----------- */\n  function onSort(direction, field) {\n    var newSorter = {\n      field: field,\n      direction: direction\n    };\n    !controlledSorter && setSorter(newSorter);\n    var newProcessedData = getProcessedData(newSorter, innerFilters);\n    var currentData = getPageData(newProcessedData);\n    onChange && onChange(getPaginationProps(newProcessedData), newSorter, innerFilters, {\n      currentData: getOriginData(currentData),\n      action: 'sort'\n    });\n  }\n  function sorterFn(sorter, direction) {\n    if (typeof sorter !== 'function') {\n      return;\n    }\n    return function (a, b) {\n      var result = sorter(a, b);\n      return direction === 'descend' ? -result : result;\n    };\n  }\n  /** ----------- Sorter End ----------- */\n  /** ----------- Filters ----------- */\n  function onHandleFilter(column, filter) {\n    var _a;\n    var newFilters = __assign(__assign({}, innerFilters), (_a = {}, _a[column.dataIndex] = filter, _a));\n    var mergedFilters = __assign(__assign({}, newFilters), controlledFilter);\n    if (isArray(filter) && filter.length) {\n      setFilters(mergedFilters);\n      var newProcessedData = getProcessedData(innerSorter, newFilters);\n      var currentData = getPageData(newProcessedData);\n      onChange && onChange(getPaginationProps(newProcessedData), innerSorter, newFilters, {\n        currentData: getOriginData(currentData),\n        action: 'filter'\n      });\n    } else if (isArray(filter) && !filter.length) {\n      onHandleFilterReset(column);\n    }\n  }\n  function onHandleFilterReset(_a) {\n    var dataIndex = _a.dataIndex;\n    var newFilters = __assign({}, innerFilters);\n    delete newFilters[dataIndex];\n    setFilters(newFilters);\n    var newProcessedData = getProcessedData(innerSorter, newFilters);\n    var currentData = getPageData(newProcessedData);\n    onChange && onChange(getPaginationProps(newProcessedData), innerSorter, newFilters, {\n      currentData: getOriginData(currentData),\n      action: 'filter'\n    });\n  }\n  /** ----------- Filters End ----------- */\n  var hasFixedColumnLeft = !!flattenColumns.find(function (c) {\n    return c.fixed === 'left';\n  });\n  var hasFixedColumnRight = !!flattenColumns.find(function (c) {\n    return c.fixed === 'right';\n  });\n  var hasFixedColumn = hasFixedColumnLeft || hasFixedColumnRight;\n  function getProcessedData(sorter, filters) {\n    var _data = (clonedData || []).slice();\n    Object.keys(filters).forEach(function (field) {\n      if (filters[field] && filters[field].length) {\n        var column_1 = getColumnByDataIndex(field);\n        if (column_1 && typeof column_1.onFilter === 'function') {\n          _data = _data.filter(function (row) {\n            return filters[field].reduce(function (pre, cur) {\n              return pre || column_1.onFilter(cur, row);\n            }, false);\n          });\n        }\n      }\n    });\n    var column = getColumnByDataIndex(sorter.field);\n    var getSortData = function getSortData(d) {\n      return d.slice().sort(sorterFn(column.sorter, sorter.direction)).map(function (item) {\n        var _a;\n        if (isArray(item[childrenColumnName])) {\n          return __assign(__assign({}, item), (_a = {}, _a[childrenColumnName] = getSortData(item[childrenColumnName]), _a));\n        }\n        return item;\n      });\n    };\n    if (sorter.direction && column && typeof column.sorter === 'function') {\n      return getSortData(_data);\n    }\n    return _data;\n  }\n  // 获得经过 sorter 和 filters 筛选之后的 data\n  var processedData = getProcessedData(innerSorter, innerFilters);\n  function getPaginationProps(_processedData) {\n    if (_processedData === void 0) {\n      _processedData = processedData;\n    }\n    var pageSize = mergePagination.pageSize || innerPageSize || 10;\n    var paginationSize = size === 'middle' ? 'default' : size;\n    var selectPopupPosition = 'top';\n    if (pagePosition === 'tl' || pagePosition === 'bl') {\n      selectPopupPosition = 'bottom';\n    } else {\n      selectPopupPosition = 'top';\n    }\n    var total = isArray(_processedData) ? _processedData.length : 0;\n    var current = Math.ceil(total / pageSize) < currentPage ? 1 : currentPage;\n    if (current !== currentPage) {\n      setCurrentPage(current);\n    }\n    var paginationProps = {\n      size: paginationSize,\n      total: total,\n      pageSize: pageSize,\n      current: current,\n      selectProps: {\n        triggerProps: {\n          position: selectPopupPosition\n        }\n      }\n    };\n    if (typeof pagination === 'object' && pagination.selectProps) {\n      paginationProps.selectProps = __assign(__assign({}, paginationProps.selectProps), pagination.selectProps);\n    }\n    if (isObject(pagination)) {\n      paginationProps = __assign(__assign({}, paginationProps), pagination);\n    }\n    if (isObject(mergePagination)) {\n      paginationProps = __assign(__assign({}, paginationProps), mergePagination);\n    }\n    paginationProps.onChange = onPaginationChange;\n    return paginationProps;\n  }\n  var paginationProps = getPaginationProps();\n  var pageData = getPageData();\n  function getPageData(currentData, _paginationProps) {\n    if (currentData === void 0) {\n      currentData = processedData;\n    }\n    if (_paginationProps === void 0) {\n      _paginationProps = paginationProps;\n    }\n    var _a = _paginationProps.current,\n      current = _a === void 0 ? 0 : _a,\n      _b = _paginationProps.pageSize,\n      pageSize = _b === void 0 ? 10 : _b;\n    if (pagination === false) {\n      return currentData;\n    }\n    if (isObject(pagination) && data.length <= pageSize) {\n      return currentData;\n    }\n    return currentData.slice((current - 1) * pageSize, current * pageSize);\n  }\n  var throttleResizeHandler = debounce(resizeHandler, 100);\n  var fixedHeader = !!(scroll && scroll.y);\n  var summaryNode = summary === null || summary === void 0 ? void 0 : summary(getOriginData(processedData));\n  var fixedFooterPosition = summary && React.isValidElement(summaryNode) && summaryNode.props.fixed;\n  var fixedFooter = fixedHeader && fixedFooterPosition;\n  useIsomorphicLayoutEffect(function () {\n    resizeHandler();\n    on(window, 'resize', throttleResizeHandler);\n    var tableHead = refTableHead.current;\n    var tableBody = refTableBody.current;\n    var tableFoot = refTableFoot.current;\n    if (tableBody) {\n      on(tableBody, 'scroll', tableScrollHandler);\n    }\n    var theadScrollContainer = tableHead && tableHead.parentNode;\n    if (tableHead) {\n      if (theadScrollContainer) {\n        on(theadScrollContainer, 'scroll', tableScrollHandler);\n      }\n    }\n    if (tableFoot) {\n      on(tableFoot, 'scroll', tableScrollHandler);\n    }\n    return function () {\n      off(window, 'resize', throttleResizeHandler);\n      if (tableBody) {\n        off(tableBody, 'scroll', tableScrollHandler);\n      }\n      if (theadScrollContainer) {\n        off(theadScrollContainer, 'scroll', tableScrollHandler);\n      }\n      if (tableFoot) {\n        off(tableFoot, 'scroll', tableScrollHandler);\n      }\n    };\n  }, [hasFixedColumnLeft, hasFixedColumnRight, scroll === null || scroll === void 0 ? void 0 : scroll.x, flattenColumns.length, data]);\n  useUpdate(function () {\n    var _a = getPaginationProps(data),\n      total = _a.total,\n      pageSize = _a.pageSize;\n    var maxPageNum = Math.ceil(total / pageSize);\n    if (maxPageNum < currentPage) {\n      setCurrentPage(1);\n    }\n  }, [data === null || data === void 0 ? void 0 : data.length]);\n  useUpdate(function () {\n    setFixedColumnClassNames();\n  }, [data, hasFixedColumnLeft, hasFixedColumnRight]);\n  useImperativeHandle(ref, function () {\n    return {\n      getRootDomElement: getRootDomElement\n    };\n  });\n  function getRootDomElement() {\n    return refTable.current;\n  }\n  function resizeHandler() {\n    setFixedColumnClassNames();\n    var root = getRootDomElement();\n    if (root && (hasFixedColumn || scroll && scroll.x)) {\n      var ele = root.querySelector(\".\" + prefixCls + \"-body\") || root.querySelector(\".\" + prefixCls + \"-content-inner\");\n      var tableViewWidth_1 = ele.clientWidth;\n      setTableViewWidth(tableViewWidth_1);\n    }\n  }\n  var setPositionClassNames = useCallback(throttle(function () {\n    var table = refTable.current;\n    var tbody = fixedHeader ? refTableBody.current : refTableNF.current && refTableNF.current.parentNode;\n    if (tbody) {\n      var scrollLeft = rtl ? -tbody.scrollLeft : tbody.scrollLeft;\n      var alignLeft = scrollLeft === 0;\n      // const alignRight = tbody.scrollLeft + tbody.clientWidth >= tbody.scrollWidth;\n      var alignRight = scrollLeft + 1 >= tbody.children[0].getBoundingClientRect().width - tbody.getBoundingClientRect().width;\n      if (alignLeft && alignRight) {\n        setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-both\");\n      } else if (alignLeft) {\n        setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-\" + (rtl ? 'right' : 'left'));\n      } else if (alignRight) {\n        setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-\" + (rtl ? 'left' : 'right'));\n      } else {\n        setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-middle\");\n      }\n    } else {\n      table && resetTableClassName(table.classList);\n    }\n  }, 100), [refTable.current, refTableBody.current, fixedHeader]);\n  function setFixedColumnClassNames() {\n    if (hasFixedColumn || scroll && isObject(scroll) && scroll.x) {\n      var table = refTable.current;\n      if (table) {\n        if (hasFixedColumnLeft) {\n          setTableFixedClassName(table.classList, prefixCls + \"-has-fixed-col-left\");\n        }\n        if (hasFixedColumnRight) {\n          setTableFixedClassName(table.classList, prefixCls + \"-has-fixed-col-right\");\n        }\n      }\n      setPositionClassNames();\n    }\n  }\n  function setTableFixedClassName(tableClassList, className) {\n    if (!tableClassList.contains(className)) {\n      tableClassList.add(className);\n    }\n  }\n  function resetTableClassName(classList) {\n    classList.remove(prefixCls + \"-scroll-position-both\");\n    classList.remove(prefixCls + \"-scroll-position-left\");\n    classList.remove(prefixCls + \"-scroll-position-right\");\n    classList.remove(prefixCls + \"-scroll-position-middle\");\n  }\n  function setFixedColumnsClassList(classList, className) {\n    if (!classList.contains(className)) {\n      resetTableClassName(classList);\n      classList.add(className);\n    }\n  }\n  var _s = useRowSelection(props, pageData, clonedData, getRowKey),\n    selectedRowKeys = _s.selectedRowKeys,\n    indeterminateKeys = _s.indeterminateKeys,\n    onCheckAll = _s.onCheckAll,\n    onCheck = _s.onCheck,\n    onCheckRadio = _s.onCheckRadio,\n    setSelectedRowKeys = _s.setSelectedRowKeys,\n    allSelectedRowKeys = _s.allSelectedRowKeys,\n    flattenData = _s.flattenData;\n  function getColumnByDataIndex(dataIndex) {\n    return flattenColumns.find(function (column, index) {\n      if (column.dataIndex !== undefined) {\n        return column.dataIndex === dataIndex;\n      }\n      return Number(dataIndex) === index;\n    });\n  }\n  function onPaginationChange(current, pageSize) {\n    setCurrentPage(current);\n    setInnerPageSize(pageSize);\n    if (current !== currentPage) {\n      scrollToTop();\n    }\n    if (rowSelection && !rowSelection.checkCrossPage && selectedRowKeys.length) {\n      setSelectedRowKeys([]);\n      rowSelection.onChange && rowSelection.onChange([], []);\n    }\n    var newPaginationProps = __assign(__assign({}, getPaginationProps()), {\n      current: current,\n      pageSize: pageSize\n    });\n    onChange && onChange(newPaginationProps, innerSorter, innerFilters, {\n      currentData: getPageData(processedData, newPaginationProps),\n      action: 'paginate'\n    });\n    mergePagination.onChange && mergePagination.onChange(current, pageSize);\n  }\n  function scrollToTop() {\n    var tableBody = refTableBody.current;\n    if (!tableBody) {\n      return;\n    }\n    var scrollTop = refTableBody.current.scrollTop;\n    var tween = new BTween({\n      from: {\n        scrollTop: scrollTop\n      },\n      to: {\n        scrollTop: 0\n      },\n      easing: 'quintInOut',\n      duration: 300,\n      onUpdate: function onUpdate(keys) {\n        refTableBody.current.scrollTop = keys.scrollTop;\n      }\n    });\n    tween.start();\n  }\n  function tableScrollHandler(e) {\n    var target = e.target;\n    var tbody = refTableBody.current;\n    var theadScrollContainer = refTableHead.current && refTableHead.current.parentNode;\n    var tfoot = refTableFoot.current;\n    if (target.scrollLeft !== lastScrollLeft.current) {\n      if (theadScrollContainer) {\n        theadScrollContainer.scrollLeft = target.scrollLeft;\n      }\n      if (tbody) {\n        tbody.scrollLeft = target.scrollLeft;\n      }\n      if (tfoot) {\n        tfoot.scrollLeft = target.scrollLeft;\n      }\n      setFixedColumnClassNames();\n    }\n    lastScrollLeft.current = e.target.scrollLeft;\n  }\n  // isFixedHeader = false\n  function tableScrollHandlerNF(e) {\n    var target = e.target;\n    var table = refTableNF.current;\n    if (target.scrollLeft !== lastScrollLeft.current) {\n      table.scrollLeft = target.scrollLeft;\n      setFixedColumnClassNames();\n    }\n    lastScrollLeft.current = e.target.scrollLeft;\n  }\n  var _t = __read(useExpand(props, flattenData, getRowKey), 2),\n    expandedRowKeys = _t[0],\n    onClickExpandBtn = _t[1];\n  var scrollStyleY = {};\n  var scrollStyleX = {};\n  if (scroll) {\n    if (scroll.x && (typeof scroll.x === 'number' || typeof scroll.x === 'string')) {\n      scrollStyleX = {\n        width: scroll.x\n      };\n    }\n    if (scroll.y && (typeof scroll.y === 'number' || typeof scroll.y === 'string')) {\n      scrollStyleY = {\n        maxHeight: scroll.y\n      };\n    }\n  }\n  function setScrollBarStyle() {\n    var wrapper = refTableHead.current && refTableHead.current.parentNode;\n    var scrollBarHeight = getScrollBarHeight(wrapper);\n    if (scrollBarHeight && scrollBarHeight > 0) {\n      wrapper.style.marginBottom = \"-\" + scrollBarHeight + \"px\";\n      wrapper.style.paddingBottom = '0px';\n      if (refTableFoot.current) {\n        refTableFoot.current.style.marginBottom = \"-\" + scrollBarHeight + \"px\";\n        refTableFoot.current.style.paddingBottom = '0px';\n      }\n    }\n    // 根据 Tbody 决定 Thead 是否显示纵向滚动条\n    // TODO: Remove\n    setTimeout(function () {\n      var scrollWrapper = refTableBody.current;\n      var scrollBarWidth = getScrollBarWidth(scrollWrapper);\n      if (scrollBarWidth) {\n        scrollbarChanged.current = true;\n        if (wrapper) {\n          wrapper.style.overflowY = 'scroll';\n        }\n        if (refTableFoot.current) {\n          refTableFoot.current.style.overflowY = 'scroll';\n        }\n      } else if (wrapper && scrollbarChanged.current) {\n        scrollbarChanged.current = false;\n        wrapper.style.overflowY = 'auto';\n        if (refTableFoot.current) {\n          refTableFoot.current.style.overflowY = 'auto';\n        }\n      }\n    });\n  }\n  var theadNode = React.createElement(Thead, __assign({}, props, {\n    sorter: innerSorter,\n    selectedRowKeys: selectedRowKeys,\n    currentFilters: innerFilters,\n    onCheckAll: onCheckAll,\n    onSort: onSort,\n    data: pageData,\n    onHandleFilter: onHandleFilter,\n    onHandleFilterReset: onHandleFilterReset,\n    prefixCls: prefixCls,\n    allSelectedRowKeys: allSelectedRowKeys,\n    groupColumns: groupColumns,\n    stickyOffsets: stickyOffsets,\n    groupStickyClassNames: groupStickyClassNames\n  }));\n  function renderThead() {\n    var maxContentWidth = isObject(scroll) && scroll.x === 'max-content';\n    return fixedHeader || virtualized ? React.createElement(ComponentHeaderWrapper, {\n      className: prefixCls + \"-header\"\n    }, React.createElement(ComponentTable, {\n      ref: refTableHead,\n      style: maxContentWidth ? {} : scrollStyleX\n    }, React.createElement(ColGroup, {\n      columns: flattenColumns,\n      prefixCls: prefixCls\n    }), theadNode)) : theadNode;\n  }\n  var footerNode = summaryNode && React.createElement(Tfoot, {\n    prefixCls: prefixCls,\n    summary: summary,\n    data: pageData,\n    columns: flattenColumns,\n    stickyOffsets: stickyOffsets,\n    stickyClassNames: stickyClassNames\n  });\n  var tbodyNode = React.createElement(Tbody, __assign({}, props, {\n    selectedRowKeys: selectedRowKeys,\n    indeterminateKeys: indeterminateKeys,\n    expandedRowKeys: expandedRowKeys,\n    onCheck: onCheck,\n    onCheckRadio: onCheckRadio,\n    onClickExpandBtn: onClickExpandBtn,\n    columns: flattenColumns,\n    data: pageData,\n    prefixCls: prefixCls,\n    hasFixedColumn: hasFixedColumn,\n    tableViewWidth: tableViewWidth,\n    indentSize: indentSize,\n    noDataElement: noDataElement || renderEmpty('Table'),\n    currentSorter: innerSorter,\n    stickyOffsets: stickyOffsets,\n    stickyClassNames: stickyClassNames,\n    getRowKey: getRowKey,\n    saveVirtualWrapperRef: function saveVirtualWrapperRef(ref) {\n      if (virtualized) {\n        refTableBody.current = ref;\n      }\n    }\n  }));\n  var tbody = !virtualized && !fixedFooter ? React.createElement(React.Fragment, null, tbodyNode, footerNode) : tbodyNode;\n  function renderTbody() {\n    return React.createElement(ResizeObserver, {\n      onResize: setScrollBarStyle\n    }, fixedHeader && !virtualized ? React.createElement(ComponentBodyWrapper, {\n      ref: refTableBody,\n      className: prefixCls + \"-body\",\n      style: scrollStyleY\n    }, React.createElement(ComponentTable, {\n      style: scrollStyleX\n    }, React.createElement(ColGroup, {\n      columns: flattenColumns,\n      prefixCls: prefixCls\n    }), tbody)) : tbody);\n  }\n  function renderTable() {\n    var scrollStyle = {};\n    if (scroll && isObject(scroll) && scroll.x) {\n      scrollStyle = {\n        width: scroll.x\n      };\n    }\n    var summaryTableNode = React.createElement(\"div\", {\n      className: prefixCls + \"-tfoot\",\n      ref: refTableFoot\n    }, React.createElement(ComponentTable, {\n      style: scrollStyle\n    }, React.createElement(ColGroup, {\n      columns: flattenColumns,\n      prefixCls: prefixCls\n    }), footerNode));\n    var summaryFixedTop = summaryNode && fixedHeader && fixedFooterPosition === 'top';\n    var summaryFixedBottom = summaryNode && fixedHeader && fixedFooterPosition === 'bottom';\n    var body = React.createElement(React.Fragment, null, showHeader ? renderThead() : null, summaryFixedTop && summaryTableNode, renderTbody(), summaryFixedBottom && summaryTableNode);\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: prefixCls + \"-container\"\n    }, React.createElement(\"div\", {\n      className: prefixCls + \"-content-scroll\"\n    }, React.createElement(\"div\", {\n      className: prefixCls + \"-content-inner\",\n      onScroll: !fixedHeader ? tableScrollHandlerNF : undefined\n    }, fixedHeader || virtualized ? body : React.createElement(ComponentTable, {\n      ref: refTableNF,\n      style: scrollStyle\n    }, React.createElement(ColGroup, {\n      prefixCls: prefixCls,\n      columns: flattenColumns\n    }), body)))), typeof footer === 'function' && React.createElement(\"div\", {\n      className: prefixCls + \"-footer\"\n    }, footer(pageData)));\n  }\n  if (!columns.length) {\n    return null;\n  }\n  var showWrapperBorder = isObject(border) ? border.wrapper : border;\n  var showCellBorder = isObject(border) ? border.cell : borderCell;\n  var showHeaderCellBorder = isObject(border) ? border.cell || border.headerCell : borderCell;\n  var showBodyCellBorder = isObject(border) ? border.cell || border.bodyCell : borderCell;\n  var classNames = cs(prefixCls, prefixCls + \"-size-\" + size, (_a = {}, _a[prefixCls + \"-border\"] = showWrapperBorder, _a[prefixCls + \"-border-cell\"] = showCellBorder, _a[prefixCls + \"-border-header-cell\"] = !showCellBorder && showHeaderCellBorder, _a[prefixCls + \"-border-body-cell\"] = !showCellBorder && showBodyCellBorder, _a[prefixCls + \"-stripe\"] = stripe, _a[prefixCls + \"-hover\"] = hover, _a[prefixCls + \"-type-radio\"] = rowSelection && rowSelection.type === 'radio', _a[prefixCls + \"-layout-fixed\"] = tableLayoutFixed || scroll && (scroll.x || scroll.y) || columns.find(function (col) {\n    return col.ellipsis;\n  }), _a[prefixCls + \"-fixed-column\"] = hasFixedColumn, _a[prefixCls + \"-virtualized\"] = virtualized, _a[prefixCls + \"-rtl\"] = rtl, _a), className);\n  var isPaginationTop = pagePosition === 'tl' || pagePosition === 'tr' || pagePosition === 'topCenter';\n  var paginationClassName = cs(prefixCls + \"-pagination\", (_b = {}, _b[prefixCls + \"-pagination-left\"] = pagePosition === 'tl' || pagePosition === 'bl', _b[prefixCls + \"-pagination-center\"] = pagePosition === 'topCenter' || pagePosition === 'bottomCenter', _b[prefixCls + \"-pagination-top\"] = isPaginationTop, _b));\n  var loading = props.loading;\n  if (typeof loading === 'boolean') {\n    loading = {\n      loading: loading\n    };\n  }\n  var customPagination = typeof renderPagination === 'function';\n  var paginationEle = customPagination ? renderPagination(React.createElement(Pagination, __assign({}, paginationProps))) : React.createElement(\"div\", {\n    className: paginationClassName\n  }, React.createElement(Pagination, __assign({}, paginationProps)));\n  return React.createElement(\"div\", __assign({\n    ref: refTable,\n    style: style,\n    className: classNames\n  }, pickDataAttributes(props)), React.createElement(Spin, __assign({\n    element: loadingElement || React.createElement(Spin, null)\n  }, loading), pagination !== false && pageData.length !== 0 && isPaginationTop && paginationEle, renderTable(), pagination !== false && pageData.length !== 0 && !isPaginationTop && paginationEle));\n}\nvar TableComponent = forwardRef(Table);\nTableComponent.displayName = 'Table';\nexport default TableComponent;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__read","o","m","Symbol","iterator","r","ar","e","next","done","push","value","error","React","useState","useRef","useContext","useImperativeHandle","forwardRef","useMemo","useCallback","debounce","throttle","BTween","isObject","isArray","cs","Spin","Thead","Tbody","Tfoot","Pagination","on","off","ConfigContext","getScrollBarHeight","getScrollBarWidth","deepCloneData","getOriginData","ColGroup","useExpand","useRowSelection","useComponent","useStickyOffsets","useStickyClassNames","useColumns","useUpdate","ResizeObserver","useMergeProps","useIsomorphicLayoutEffect","pickDataAttributes","defaultProps","showHeader","border","hover","rowKey","pagePosition","childrenColumnName","indentSize","showSorterTooltip","Table","baseProps","ref","_a","_b","_c","_d","_e","getPrefixCls","loadingElement","ctxSize","size","tablePagination","renderEmpty","componentConfig","rtl","props","mergePagination","pagination","style","className","components","borderCell","_f","columns","_g","data","scroll","noDataElement","stripe","onChange","rowSelection","tableLayoutFixed","footer","virtualized","renderPagination","summary","clonedData","prefixCls","indexOf","refTableHead","refTableBody","refTableFoot","refTable","refTableNF","lastScrollLeft","scrollbarChanged","_h","getDefaultFiltersAndSorter","currentFilters","currentSorter","_j","currentPage","setCurrentPage","_k","pageSize","defaultPageSize","innerPageSize","setInnerPageSize","_l","filters","setFilters","_m","sorter","setSorter","_o","tableViewWidth","setTableViewWidth","_p","groupColumns","flattenColumns","stickyOffsets","_q","groupStickyClassNames","stickyClassNames","_r","ComponentTable","ComponentBodyWrapper","ComponentHeaderWrapper","getRowKey","record","travel","forEach","column","index","innerDataIndex","dataIndex","undefined","defaultFilters","filteredValue","defaultSortOrder","field","direction","sortOrder","controlledFilter","flattenFilteredValueColumns","filter","newFilters","controlledSorter","flattenSortOrderColumns","innerSorter","innerFilters","keys","onSort","newSorter","newProcessedData","getProcessedData","currentData","getPageData","getPaginationProps","action","sorterFn","a","b","result","onHandleFilter","mergedFilters","onHandleFilterReset","hasFixedColumnLeft","find","c","fixed","hasFixedColumnRight","hasFixedColumn","_data","slice","column_1","getColumnByDataIndex","onFilter","row","reduce","pre","cur","getSortData","d","sort","map","item","processedData","_processedData","paginationSize","selectPopupPosition","total","current","Math","ceil","paginationProps","selectProps","triggerProps","position","onPaginationChange","pageData","_paginationProps","throttleResizeHandler","resizeHandler","fixedHeader","y","summaryNode","fixedFooterPosition","isValidElement","fixedFooter","window","tableHead","tableBody","tableFoot","tableScrollHandler","theadScrollContainer","parentNode","x","maxPageNum","setFixedColumnClassNames","getRootDomElement","root","ele","querySelector","tableViewWidth_1","clientWidth","setPositionClassNames","table","tbody","scrollLeft","alignLeft","alignRight","children","getBoundingClientRect","width","setFixedColumnsClassList","classList","resetTableClassName","setTableFixedClassName","tableClassList","contains","add","remove","_s","selectedRowKeys","indeterminateKeys","onCheckAll","onCheck","onCheckRadio","setSelectedRowKeys","allSelectedRowKeys","flattenData","Number","scrollToTop","checkCrossPage","newPaginationProps","scrollTop","tween","from","to","easing","duration","onUpdate","start","target","tfoot","tableScrollHandlerNF","_t","expandedRowKeys","onClickExpandBtn","scrollStyleY","scrollStyleX","maxHeight","setScrollBarStyle","wrapper","scrollBarHeight","marginBottom","paddingBottom","setTimeout","scrollWrapper","scrollBarWidth","overflowY","theadNode","createElement","renderThead","maxContentWidth","footerNode","tbodyNode","saveVirtualWrapperRef","Fragment","renderTbody","onResize","renderTable","scrollStyle","summaryTableNode","summaryFixedTop","summaryFixedBottom","body","onScroll","showWrapperBorder","showCellBorder","cell","showHeaderCellBorder","headerCell","showBodyCellBorder","bodyCell","classNames","type","col","ellipsis","isPaginationTop","paginationClassName","loading","customPagination","paginationEle","element","TableComponent","displayName"],"sources":["D:/Code/EchoGPT-frontend/node_modules/@arco-design/web-react/es/Table/table.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useState, useRef, useContext, useImperativeHandle, forwardRef, useMemo, useCallback, } from 'react';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\nimport BTween from 'b-tween';\nimport { isObject, isArray } from '../_util/is';\nimport cs from '../_util/classNames';\nimport Spin from '../Spin';\nimport Thead from './thead/index';\nimport Tbody from './tbody/index';\nimport Tfoot from './tfoot/index';\nimport Pagination from '../Pagination';\nimport { on, off } from '../_util/dom';\nimport { ConfigContext } from '../ConfigProvider';\nimport { getScrollBarHeight, getScrollBarWidth, deepCloneData, getOriginData } from './utils';\nimport ColGroup from './colgroup';\nimport useExpand from './hooks/useExpand';\nimport useRowSelection from './hooks/useRowSelection';\nimport useComponent from './hooks/useComponent';\nimport useStickyOffsets from './hooks/useStickyOffsets';\nimport useStickyClassNames from './hooks/useStickyClassNames';\nimport useColumns from './hooks/useColumns';\nimport useUpdate from '../_util/hooks/useUpdate';\nimport ResizeObserver from '../_util/resizeObserver';\nimport useMergeProps from '../_util/hooks/useMergeProps';\nimport useIsomorphicLayoutEffect from '../_util/hooks/useIsomorphicLayoutEffect';\nimport { pickDataAttributes } from '../_util/pick';\nvar defaultProps = {\n    showHeader: true,\n    border: true,\n    hover: true,\n    rowKey: 'key',\n    pagePosition: 'br',\n    childrenColumnName: 'children',\n    indentSize: 15,\n    showSorterTooltip: true,\n};\nfunction Table(baseProps, ref) {\n    var _a, _b;\n    var _c, _d;\n    var _e = useContext(ConfigContext), getPrefixCls = _e.getPrefixCls, loadingElement = _e.loadingElement, ctxSize = _e.size, tablePagination = _e.tablePagination, renderEmpty = _e.renderEmpty, componentConfig = _e.componentConfig, rtl = _e.rtl;\n    var props = useMergeProps(baseProps, defaultProps, componentConfig === null || componentConfig === void 0 ? void 0 : componentConfig.Table);\n    // priority: props.pagination > ConfigProvider.tablePagination > ConfigProvider.Table.pagination\n    var mergePagination = useMergeProps(isObject(baseProps === null || baseProps === void 0 ? void 0 : baseProps.pagination) ? baseProps === null || baseProps === void 0 ? void 0 : baseProps.pagination : {}, isObject((_c = componentConfig === null || componentConfig === void 0 ? void 0 : componentConfig.Table) === null || _c === void 0 ? void 0 : _c.pagination) ? (_d = componentConfig === null || componentConfig === void 0 ? void 0 : componentConfig.Table) === null || _d === void 0 ? void 0 : _d.pagination : {}, tablePagination || {});\n    var style = props.style, className = props.className, components = props.components, border = props.border, borderCell = props.borderCell, _f = props.columns, columns = _f === void 0 ? [] : _f, _g = props.data, data = _g === void 0 ? [] : _g, scroll = props.scroll, noDataElement = props.noDataElement, showHeader = props.showHeader, stripe = props.stripe, hover = props.hover, pagination = props.pagination, onChange = props.onChange, pagePosition = props.pagePosition, childrenColumnName = props.childrenColumnName, indentSize = props.indentSize, rowSelection = props.rowSelection, tableLayoutFixed = props.tableLayoutFixed, footer = props.footer, virtualized = props.virtualized, renderPagination = props.renderPagination, summary = props.summary, rowKey = props.rowKey;\n    var clonedData = useMemo(function () { return deepCloneData(data, childrenColumnName); }, [data, childrenColumnName]);\n    var prefixCls = getPrefixCls('table');\n    // configProvider 提供的size可能和table size 不匹配，此时默认 'default'\n    var size = props.size || (['default', 'middle', 'small'].indexOf(ctxSize) > -1 ? ctxSize : 'default');\n    var refTableHead = useRef(null);\n    var refTableBody = useRef(null);\n    var refTableFoot = useRef(null);\n    var refTable = useRef(null);\n    // Not fixed header\n    var refTableNF = useRef(null);\n    var lastScrollLeft = useRef(0);\n    var scrollbarChanged = useRef(false);\n    var _h = getDefaultFiltersAndSorter(columns), currentFilters = _h.currentFilters, currentSorter = _h.currentSorter;\n    var _j = __read(useState(1), 2), currentPage = _j[0], setCurrentPage = _j[1];\n    var _k = __read(useState(mergePagination.pageSize || mergePagination.defaultPageSize || 10), 2), innerPageSize = _k[0], setInnerPageSize = _k[1];\n    var _l = __read(useState(currentFilters), 2), filters = _l[0], setFilters = _l[1];\n    var _m = __read(useState(currentSorter), 2), sorter = _m[0], setSorter = _m[1];\n    var _o = __read(useState(0), 2), tableViewWidth = _o[0], setTableViewWidth = _o[1];\n    var _p = __read(useColumns(props), 2), groupColumns = _p[0], flattenColumns = _p[1];\n    var stickyOffsets = useStickyOffsets(flattenColumns);\n    var _q = __read(useStickyClassNames(groupColumns, flattenColumns, prefixCls), 2), groupStickyClassNames = _q[0], stickyClassNames = _q[1];\n    var _r = useComponent(components), ComponentTable = _r.ComponentTable, ComponentBodyWrapper = _r.ComponentBodyWrapper, ComponentHeaderWrapper = _r.ComponentHeaderWrapper;\n    var getRowKey = useMemo(function () {\n        if (typeof rowKey === 'function') {\n            return function (record) { return rowKey(getOriginData(record)); };\n        }\n        return function (record) { return record[rowKey]; };\n    }, [rowKey]);\n    function getDefaultFiltersAndSorter(columns) {\n        var currentFilters = {};\n        var currentSorter = {};\n        function travel(columns) {\n            if (columns && columns.length > 0) {\n                columns.forEach(function (column, index) {\n                    var innerDataIndex = column.dataIndex === undefined ? index : column.dataIndex;\n                    if (!column[childrenColumnName]) {\n                        if (column.defaultFilters) {\n                            currentFilters[innerDataIndex] = column.defaultFilters;\n                        }\n                        if (column.filteredValue) {\n                            currentFilters[innerDataIndex] = column.filteredValue;\n                        }\n                        if (column.defaultSortOrder) {\n                            currentSorter.field = innerDataIndex;\n                            currentSorter.direction = column.defaultSortOrder;\n                        }\n                        if (column.sortOrder) {\n                            currentSorter.field = innerDataIndex;\n                            currentSorter.direction = column.sortOrder;\n                        }\n                    }\n                    else {\n                        travel(column[childrenColumnName]);\n                    }\n                });\n            }\n        }\n        travel(columns);\n        return { currentFilters: currentFilters, currentSorter: currentSorter };\n    }\n    var controlledFilter = useMemo(function () {\n        // 允许 filteredValue 设置为 undefined 表示不筛选\n        var flattenFilteredValueColumns = flattenColumns.filter(function (column) { return 'filteredValue' in column; });\n        var newFilters = {};\n        // 受控的筛选，当columns中的筛选发生改变时，更新state\n        if (flattenFilteredValueColumns.length) {\n            flattenFilteredValueColumns.forEach(function (column, index) {\n                var innerDataIndex = column.dataIndex === undefined ? index : column.dataIndex;\n                if (innerDataIndex !== undefined) {\n                    newFilters[innerDataIndex] = column.filteredValue;\n                }\n            });\n        }\n        return newFilters;\n    }, [flattenColumns]);\n    var controlledSorter = useMemo(function () {\n        // 允许 sorter 设置为 null，表示不排序\n        var flattenSortOrderColumns = flattenColumns.filter(function (column) { return 'sortOrder' in column; });\n        var length = flattenSortOrderColumns.length;\n        while (length--) {\n            var column = flattenSortOrderColumns[length];\n            if (column.sortOrder || length === 0) {\n                return { field: column.dataIndex, direction: column.sortOrder };\n            }\n        }\n        return null;\n    }, [flattenColumns]);\n    var innerSorter = controlledSorter || sorter || {};\n    var innerFilters = useMemo(function () {\n        return Object.keys(controlledFilter).length ? controlledFilter : filters;\n    }, [filters, controlledFilter]);\n    /** ----------- Sorter ----------- */\n    function onSort(direction, field) {\n        var newSorter = {\n            field: field,\n            direction: direction,\n        };\n        !controlledSorter && setSorter(newSorter);\n        var newProcessedData = getProcessedData(newSorter, innerFilters);\n        var currentData = getPageData(newProcessedData);\n        onChange &&\n            onChange(getPaginationProps(newProcessedData), newSorter, innerFilters, {\n                currentData: getOriginData(currentData),\n                action: 'sort',\n            });\n    }\n    function sorterFn(sorter, direction) {\n        if (typeof sorter !== 'function') {\n            return;\n        }\n        return function (a, b) {\n            var result = sorter(a, b);\n            return direction === 'descend' ? -result : result;\n        };\n    }\n    /** ----------- Sorter End ----------- */\n    /** ----------- Filters ----------- */\n    function onHandleFilter(column, filter) {\n        var _a;\n        var newFilters = __assign(__assign({}, innerFilters), (_a = {}, _a[column.dataIndex] = filter, _a));\n        var mergedFilters = __assign(__assign({}, newFilters), controlledFilter);\n        if (isArray(filter) && filter.length) {\n            setFilters(mergedFilters);\n            var newProcessedData = getProcessedData(innerSorter, newFilters);\n            var currentData = getPageData(newProcessedData);\n            onChange &&\n                onChange(getPaginationProps(newProcessedData), innerSorter, newFilters, {\n                    currentData: getOriginData(currentData),\n                    action: 'filter',\n                });\n        }\n        else if (isArray(filter) && !filter.length) {\n            onHandleFilterReset(column);\n        }\n    }\n    function onHandleFilterReset(_a) {\n        var dataIndex = _a.dataIndex;\n        var newFilters = __assign({}, innerFilters);\n        delete newFilters[dataIndex];\n        setFilters(newFilters);\n        var newProcessedData = getProcessedData(innerSorter, newFilters);\n        var currentData = getPageData(newProcessedData);\n        onChange &&\n            onChange(getPaginationProps(newProcessedData), innerSorter, newFilters, {\n                currentData: getOriginData(currentData),\n                action: 'filter',\n            });\n    }\n    /** ----------- Filters End ----------- */\n    var hasFixedColumnLeft = !!flattenColumns.find(function (c) { return c.fixed === 'left'; });\n    var hasFixedColumnRight = !!flattenColumns.find(function (c) { return c.fixed === 'right'; });\n    var hasFixedColumn = hasFixedColumnLeft || hasFixedColumnRight;\n    function getProcessedData(sorter, filters) {\n        var _data = (clonedData || []).slice();\n        Object.keys(filters).forEach(function (field) {\n            if (filters[field] && filters[field].length) {\n                var column_1 = getColumnByDataIndex(field);\n                if (column_1 && typeof column_1.onFilter === 'function') {\n                    _data = _data.filter(function (row) {\n                        return filters[field].reduce(function (pre, cur) { return pre || column_1.onFilter(cur, row); }, false);\n                    });\n                }\n            }\n        });\n        var column = getColumnByDataIndex(sorter.field);\n        var getSortData = function (d) {\n            return d\n                .slice()\n                .sort(sorterFn(column.sorter, sorter.direction))\n                .map(function (item) {\n                var _a;\n                if (isArray(item[childrenColumnName])) {\n                    return __assign(__assign({}, item), (_a = {}, _a[childrenColumnName] = getSortData(item[childrenColumnName]), _a));\n                }\n                return item;\n            });\n        };\n        if (sorter.direction && column && typeof column.sorter === 'function') {\n            return getSortData(_data);\n        }\n        return _data;\n    }\n    // 获得经过 sorter 和 filters 筛选之后的 data\n    var processedData = getProcessedData(innerSorter, innerFilters);\n    function getPaginationProps(_processedData) {\n        if (_processedData === void 0) { _processedData = processedData; }\n        var pageSize = mergePagination.pageSize || innerPageSize || 10;\n        var paginationSize = size === 'middle' ? 'default' : size;\n        var selectPopupPosition = 'top';\n        if (pagePosition === 'tl' || pagePosition === 'bl') {\n            selectPopupPosition = 'bottom';\n        }\n        else {\n            selectPopupPosition = 'top';\n        }\n        var total = isArray(_processedData) ? _processedData.length : 0;\n        var current = Math.ceil(total / pageSize) < currentPage ? 1 : currentPage;\n        if (current !== currentPage) {\n            setCurrentPage(current);\n        }\n        var paginationProps = {\n            size: paginationSize,\n            total: total,\n            pageSize: pageSize,\n            current: current,\n            selectProps: {\n                triggerProps: {\n                    position: selectPopupPosition,\n                },\n            },\n        };\n        if (typeof pagination === 'object' && pagination.selectProps) {\n            paginationProps.selectProps = __assign(__assign({}, paginationProps.selectProps), pagination.selectProps);\n        }\n        if (isObject(pagination)) {\n            paginationProps = __assign(__assign({}, paginationProps), pagination);\n        }\n        if (isObject(mergePagination)) {\n            paginationProps = __assign(__assign({}, paginationProps), mergePagination);\n        }\n        paginationProps.onChange = onPaginationChange;\n        return paginationProps;\n    }\n    var paginationProps = getPaginationProps();\n    var pageData = getPageData();\n    function getPageData(currentData, _paginationProps) {\n        if (currentData === void 0) { currentData = processedData; }\n        if (_paginationProps === void 0) { _paginationProps = paginationProps; }\n        var _a = _paginationProps.current, current = _a === void 0 ? 0 : _a, _b = _paginationProps.pageSize, pageSize = _b === void 0 ? 10 : _b;\n        if (pagination === false) {\n            return currentData;\n        }\n        if (isObject(pagination) && data.length <= pageSize) {\n            return currentData;\n        }\n        return currentData.slice((current - 1) * pageSize, current * pageSize);\n    }\n    var throttleResizeHandler = debounce(resizeHandler, 100);\n    var fixedHeader = !!(scroll && scroll.y);\n    var summaryNode = summary === null || summary === void 0 ? void 0 : summary(getOriginData(processedData));\n    var fixedFooterPosition = summary && React.isValidElement(summaryNode) && summaryNode.props.fixed;\n    var fixedFooter = fixedHeader && fixedFooterPosition;\n    useIsomorphicLayoutEffect(function () {\n        resizeHandler();\n        on(window, 'resize', throttleResizeHandler);\n        var tableHead = refTableHead.current;\n        var tableBody = refTableBody.current;\n        var tableFoot = refTableFoot.current;\n        if (tableBody) {\n            on(tableBody, 'scroll', tableScrollHandler);\n        }\n        var theadScrollContainer = tableHead && tableHead.parentNode;\n        if (tableHead) {\n            if (theadScrollContainer) {\n                on(theadScrollContainer, 'scroll', tableScrollHandler);\n            }\n        }\n        if (tableFoot) {\n            on(tableFoot, 'scroll', tableScrollHandler);\n        }\n        return function () {\n            off(window, 'resize', throttleResizeHandler);\n            if (tableBody) {\n                off(tableBody, 'scroll', tableScrollHandler);\n            }\n            if (theadScrollContainer) {\n                off(theadScrollContainer, 'scroll', tableScrollHandler);\n            }\n            if (tableFoot) {\n                off(tableFoot, 'scroll', tableScrollHandler);\n            }\n        };\n    }, [hasFixedColumnLeft, hasFixedColumnRight, scroll === null || scroll === void 0 ? void 0 : scroll.x, flattenColumns.length, data]);\n    useUpdate(function () {\n        var _a = getPaginationProps(data), total = _a.total, pageSize = _a.pageSize;\n        var maxPageNum = Math.ceil(total / pageSize);\n        if (maxPageNum < currentPage) {\n            setCurrentPage(1);\n        }\n    }, [data === null || data === void 0 ? void 0 : data.length]);\n    useUpdate(function () {\n        setFixedColumnClassNames();\n    }, [data, hasFixedColumnLeft, hasFixedColumnRight]);\n    useImperativeHandle(ref, function () { return ({\n        getRootDomElement: getRootDomElement,\n    }); });\n    function getRootDomElement() {\n        return refTable.current;\n    }\n    function resizeHandler() {\n        setFixedColumnClassNames();\n        var root = getRootDomElement();\n        if (root && (hasFixedColumn || (scroll && scroll.x))) {\n            var ele = root.querySelector(\".\" + prefixCls + \"-body\") ||\n                root.querySelector(\".\" + prefixCls + \"-content-inner\");\n            var tableViewWidth_1 = ele.clientWidth;\n            setTableViewWidth(tableViewWidth_1);\n        }\n    }\n    var setPositionClassNames = useCallback(throttle(function () {\n        var table = refTable.current;\n        var tbody = (fixedHeader ? refTableBody.current : refTableNF.current && refTableNF.current.parentNode);\n        if (tbody) {\n            var scrollLeft = rtl ? -tbody.scrollLeft : tbody.scrollLeft;\n            var alignLeft = scrollLeft === 0;\n            // const alignRight = tbody.scrollLeft + tbody.clientWidth >= tbody.scrollWidth;\n            var alignRight = scrollLeft + 1 >=\n                tbody.children[0].getBoundingClientRect().width - tbody.getBoundingClientRect().width;\n            if (alignLeft && alignRight) {\n                setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-both\");\n            }\n            else if (alignLeft) {\n                setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-\" + (rtl ? 'right' : 'left'));\n            }\n            else if (alignRight) {\n                setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-\" + (rtl ? 'left' : 'right'));\n            }\n            else {\n                setFixedColumnsClassList(table.classList, prefixCls + \"-scroll-position-middle\");\n            }\n        }\n        else {\n            table && resetTableClassName(table.classList);\n        }\n    }, 100), [refTable.current, refTableBody.current, fixedHeader]);\n    function setFixedColumnClassNames() {\n        if (hasFixedColumn || (scroll && isObject(scroll) && scroll.x)) {\n            var table = refTable.current;\n            if (table) {\n                if (hasFixedColumnLeft) {\n                    setTableFixedClassName(table.classList, prefixCls + \"-has-fixed-col-left\");\n                }\n                if (hasFixedColumnRight) {\n                    setTableFixedClassName(table.classList, prefixCls + \"-has-fixed-col-right\");\n                }\n            }\n            setPositionClassNames();\n        }\n    }\n    function setTableFixedClassName(tableClassList, className) {\n        if (!tableClassList.contains(className)) {\n            tableClassList.add(className);\n        }\n    }\n    function resetTableClassName(classList) {\n        classList.remove(prefixCls + \"-scroll-position-both\");\n        classList.remove(prefixCls + \"-scroll-position-left\");\n        classList.remove(prefixCls + \"-scroll-position-right\");\n        classList.remove(prefixCls + \"-scroll-position-middle\");\n    }\n    function setFixedColumnsClassList(classList, className) {\n        if (!classList.contains(className)) {\n            resetTableClassName(classList);\n            classList.add(className);\n        }\n    }\n    var _s = useRowSelection(props, pageData, clonedData, getRowKey), selectedRowKeys = _s.selectedRowKeys, indeterminateKeys = _s.indeterminateKeys, onCheckAll = _s.onCheckAll, onCheck = _s.onCheck, onCheckRadio = _s.onCheckRadio, setSelectedRowKeys = _s.setSelectedRowKeys, allSelectedRowKeys = _s.allSelectedRowKeys, flattenData = _s.flattenData;\n    function getColumnByDataIndex(dataIndex) {\n        return flattenColumns.find(function (column, index) {\n            if (column.dataIndex !== undefined) {\n                return column.dataIndex === dataIndex;\n            }\n            return Number(dataIndex) === index;\n        });\n    }\n    function onPaginationChange(current, pageSize) {\n        setCurrentPage(current);\n        setInnerPageSize(pageSize);\n        if (current !== currentPage) {\n            scrollToTop();\n        }\n        if (rowSelection && !rowSelection.checkCrossPage && selectedRowKeys.length) {\n            setSelectedRowKeys([]);\n            rowSelection.onChange && rowSelection.onChange([], []);\n        }\n        var newPaginationProps = __assign(__assign({}, getPaginationProps()), { current: current, pageSize: pageSize });\n        onChange &&\n            onChange(newPaginationProps, innerSorter, innerFilters, {\n                currentData: getPageData(processedData, newPaginationProps),\n                action: 'paginate',\n            });\n        mergePagination.onChange && mergePagination.onChange(current, pageSize);\n    }\n    function scrollToTop() {\n        var tableBody = refTableBody.current;\n        if (!tableBody) {\n            return;\n        }\n        var scrollTop = refTableBody.current.scrollTop;\n        var tween = new BTween({\n            from: { scrollTop: scrollTop },\n            to: { scrollTop: 0 },\n            easing: 'quintInOut',\n            duration: 300,\n            onUpdate: function (keys) {\n                refTableBody.current.scrollTop = keys.scrollTop;\n            },\n        });\n        tween.start();\n    }\n    function tableScrollHandler(e) {\n        var target = e.target;\n        var tbody = refTableBody.current;\n        var theadScrollContainer = refTableHead.current && refTableHead.current.parentNode;\n        var tfoot = refTableFoot.current;\n        if (target.scrollLeft !== lastScrollLeft.current) {\n            if (theadScrollContainer) {\n                theadScrollContainer.scrollLeft = target.scrollLeft;\n            }\n            if (tbody) {\n                tbody.scrollLeft = target.scrollLeft;\n            }\n            if (tfoot) {\n                tfoot.scrollLeft = target.scrollLeft;\n            }\n            setFixedColumnClassNames();\n        }\n        lastScrollLeft.current = e.target.scrollLeft;\n    }\n    // isFixedHeader = false\n    function tableScrollHandlerNF(e) {\n        var target = e.target;\n        var table = refTableNF.current;\n        if (target.scrollLeft !== lastScrollLeft.current) {\n            table.scrollLeft = target.scrollLeft;\n            setFixedColumnClassNames();\n        }\n        lastScrollLeft.current = e.target.scrollLeft;\n    }\n    var _t = __read(useExpand(props, flattenData, getRowKey), 2), expandedRowKeys = _t[0], onClickExpandBtn = _t[1];\n    var scrollStyleY = {};\n    var scrollStyleX = {};\n    if (scroll) {\n        if (scroll.x && (typeof scroll.x === 'number' || typeof scroll.x === 'string')) {\n            scrollStyleX = {\n                width: scroll.x,\n            };\n        }\n        if (scroll.y && (typeof scroll.y === 'number' || typeof scroll.y === 'string')) {\n            scrollStyleY = {\n                maxHeight: scroll.y,\n            };\n        }\n    }\n    function setScrollBarStyle() {\n        var wrapper = refTableHead.current && refTableHead.current.parentNode;\n        var scrollBarHeight = getScrollBarHeight(wrapper);\n        if (scrollBarHeight && scrollBarHeight > 0) {\n            wrapper.style.marginBottom = \"-\" + scrollBarHeight + \"px\";\n            wrapper.style.paddingBottom = '0px';\n            if (refTableFoot.current) {\n                refTableFoot.current.style.marginBottom = \"-\" + scrollBarHeight + \"px\";\n                refTableFoot.current.style.paddingBottom = '0px';\n            }\n        }\n        // 根据 Tbody 决定 Thead 是否显示纵向滚动条\n        // TODO: Remove\n        setTimeout(function () {\n            var scrollWrapper = refTableBody.current;\n            var scrollBarWidth = getScrollBarWidth(scrollWrapper);\n            if (scrollBarWidth) {\n                scrollbarChanged.current = true;\n                if (wrapper) {\n                    wrapper.style.overflowY = 'scroll';\n                }\n                if (refTableFoot.current) {\n                    refTableFoot.current.style.overflowY = 'scroll';\n                }\n            }\n            else if (wrapper && scrollbarChanged.current) {\n                scrollbarChanged.current = false;\n                wrapper.style.overflowY = 'auto';\n                if (refTableFoot.current) {\n                    refTableFoot.current.style.overflowY = 'auto';\n                }\n            }\n        });\n    }\n    var theadNode = (React.createElement(Thead, __assign({}, props, { sorter: innerSorter, selectedRowKeys: selectedRowKeys, currentFilters: innerFilters, onCheckAll: onCheckAll, onSort: onSort, data: pageData, onHandleFilter: onHandleFilter, onHandleFilterReset: onHandleFilterReset, prefixCls: prefixCls, allSelectedRowKeys: allSelectedRowKeys, groupColumns: groupColumns, stickyOffsets: stickyOffsets, groupStickyClassNames: groupStickyClassNames })));\n    function renderThead() {\n        var maxContentWidth = isObject(scroll) && scroll.x === 'max-content';\n        return fixedHeader || virtualized ? (React.createElement(ComponentHeaderWrapper, { className: prefixCls + \"-header\" },\n            React.createElement(ComponentTable, { ref: refTableHead, style: maxContentWidth ? {} : scrollStyleX },\n                React.createElement(ColGroup, { columns: flattenColumns, prefixCls: prefixCls }),\n                theadNode))) : (theadNode);\n    }\n    var footerNode = summaryNode && (React.createElement(Tfoot, { prefixCls: prefixCls, summary: summary, data: pageData, columns: flattenColumns, stickyOffsets: stickyOffsets, stickyClassNames: stickyClassNames }));\n    var tbodyNode = (React.createElement(Tbody, __assign({}, props, { selectedRowKeys: selectedRowKeys, indeterminateKeys: indeterminateKeys, expandedRowKeys: expandedRowKeys, onCheck: onCheck, onCheckRadio: onCheckRadio, onClickExpandBtn: onClickExpandBtn, columns: flattenColumns, data: pageData, prefixCls: prefixCls, hasFixedColumn: hasFixedColumn, tableViewWidth: tableViewWidth, indentSize: indentSize, noDataElement: noDataElement || renderEmpty('Table'), currentSorter: innerSorter, stickyOffsets: stickyOffsets, stickyClassNames: stickyClassNames, getRowKey: getRowKey, saveVirtualWrapperRef: function (ref) {\n            if (virtualized) {\n                refTableBody.current = ref;\n            }\n        } })));\n    var tbody = !virtualized && !fixedFooter ? (React.createElement(React.Fragment, null,\n        tbodyNode,\n        footerNode)) : (tbodyNode);\n    function renderTbody() {\n        return (React.createElement(ResizeObserver, { onResize: setScrollBarStyle }, fixedHeader && !virtualized ? (React.createElement(ComponentBodyWrapper, { ref: refTableBody, className: prefixCls + \"-body\", style: scrollStyleY },\n            React.createElement(ComponentTable, { style: scrollStyleX },\n                React.createElement(ColGroup, { columns: flattenColumns, prefixCls: prefixCls }),\n                tbody))) : (tbody)));\n    }\n    function renderTable() {\n        var scrollStyle = {};\n        if (scroll && isObject(scroll) && scroll.x) {\n            scrollStyle = {\n                width: scroll.x,\n            };\n        }\n        var summaryTableNode = (React.createElement(\"div\", { className: prefixCls + \"-tfoot\", ref: refTableFoot },\n            React.createElement(ComponentTable, { style: scrollStyle },\n                React.createElement(ColGroup, { columns: flattenColumns, prefixCls: prefixCls }),\n                footerNode)));\n        var summaryFixedTop = summaryNode && fixedHeader && fixedFooterPosition === 'top';\n        var summaryFixedBottom = summaryNode && fixedHeader && fixedFooterPosition === 'bottom';\n        var body = (React.createElement(React.Fragment, null,\n            showHeader ? renderThead() : null,\n            summaryFixedTop && summaryTableNode,\n            renderTbody(),\n            summaryFixedBottom && summaryTableNode));\n        return (React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { className: prefixCls + \"-container\" },\n                React.createElement(\"div\", { className: prefixCls + \"-content-scroll\" },\n                    React.createElement(\"div\", { className: prefixCls + \"-content-inner\", onScroll: !fixedHeader ? tableScrollHandlerNF : undefined }, fixedHeader || virtualized ? (body) : (React.createElement(ComponentTable, { ref: refTableNF, style: scrollStyle },\n                        React.createElement(ColGroup, { prefixCls: prefixCls, columns: flattenColumns }),\n                        body))))),\n            typeof footer === 'function' && (React.createElement(\"div\", { className: prefixCls + \"-footer\" }, footer(pageData)))));\n    }\n    if (!columns.length) {\n        return null;\n    }\n    var showWrapperBorder = isObject(border) ? border.wrapper : border;\n    var showCellBorder = isObject(border) ? border.cell : borderCell;\n    var showHeaderCellBorder = isObject(border) ? border.cell || border.headerCell : borderCell;\n    var showBodyCellBorder = isObject(border) ? border.cell || border.bodyCell : borderCell;\n    var classNames = cs(prefixCls, prefixCls + \"-size-\" + size, (_a = {},\n        _a[prefixCls + \"-border\"] = showWrapperBorder,\n        _a[prefixCls + \"-border-cell\"] = showCellBorder,\n        _a[prefixCls + \"-border-header-cell\"] = !showCellBorder && showHeaderCellBorder,\n        _a[prefixCls + \"-border-body-cell\"] = !showCellBorder && showBodyCellBorder,\n        _a[prefixCls + \"-stripe\"] = stripe,\n        _a[prefixCls + \"-hover\"] = hover,\n        _a[prefixCls + \"-type-radio\"] = rowSelection && rowSelection.type === 'radio',\n        _a[prefixCls + \"-layout-fixed\"] = tableLayoutFixed ||\n            (scroll && (scroll.x || scroll.y)) ||\n            columns.find(function (col) { return col.ellipsis; }),\n        _a[prefixCls + \"-fixed-column\"] = hasFixedColumn,\n        _a[prefixCls + \"-virtualized\"] = virtualized,\n        _a[prefixCls + \"-rtl\"] = rtl,\n        _a), className);\n    var isPaginationTop = pagePosition === 'tl' || pagePosition === 'tr' || pagePosition === 'topCenter';\n    var paginationClassName = cs(prefixCls + \"-pagination\", (_b = {},\n        _b[prefixCls + \"-pagination-left\"] = pagePosition === 'tl' || pagePosition === 'bl',\n        _b[prefixCls + \"-pagination-center\"] = pagePosition === 'topCenter' || pagePosition === 'bottomCenter',\n        _b[prefixCls + \"-pagination-top\"] = isPaginationTop,\n        _b));\n    var loading = props.loading;\n    if (typeof loading === 'boolean') {\n        loading = { loading: loading };\n    }\n    var customPagination = typeof renderPagination === 'function';\n    var paginationEle = customPagination ? (renderPagination(React.createElement(Pagination, __assign({}, paginationProps)))) : (React.createElement(\"div\", { className: paginationClassName },\n        React.createElement(Pagination, __assign({}, paginationProps))));\n    return (React.createElement(\"div\", __assign({ ref: refTable, style: style, className: classNames }, pickDataAttributes(props)),\n        React.createElement(Spin, __assign({ element: loadingElement || React.createElement(Spin, null) }, loading),\n            pagination !== false && pageData.length !== 0 && isPaginationTop && paginationEle,\n            renderTable(),\n            pagination !== false && pageData.length !== 0 && !isPaginationTop && paginationEle)));\n}\nvar TableComponent = forwardRef(Table);\nTableComponent.displayName = 'Table';\nexport default TableComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}